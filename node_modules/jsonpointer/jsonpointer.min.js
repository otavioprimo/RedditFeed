function escapeReplacer(t){switch(t){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+t)}function untilde(t){return hasExcape.test(t)?t.replace(escapeMatcher,escapeReplacer):t}function setter(t,e,n){for(var r,i,o=1,s=e.length;s>o&&(r=untilde(e[o++]),i=s>o,"undefined"==typeof t[r]&&(Array.isArray(t)&&"-"===r&&(r=t.length),i&&(""!==e[o]&&e[o]<1/0||"-"===e[o]?t[r]=[]:t[r]={})),i);)t=t[r];var a=t[r];return void 0===n?delete t[r]:t[r]=n,a}function compilePointer(t){if("string"==typeof t){if(t=t.split("/"),""===t[0])return t;throw new Error("Invalid JSON pointer.")}if(Array.isArray(t))return t;throw new Error("Invalid JSON pointer.")}function get(t,e){if("object"!=typeof t)throw new Error("Invalid input object.");e=compilePointer(e);var n=e.length;if(1===n)return t;for(var r=1;n>r;){if(t=t[untilde(e[r++])],n===r)return t;if("object"!=typeof t)return void 0}}function set(t,e,n){if("object"!=typeof t)throw new Error("Invalid input object.");if(e=compilePointer(e),0===e.length)throw new Error("Invalid JSON pointer for set.");return setter(t,e,n)}function compile(t){var e=compilePointer(t);return{get:function(t){return get(t,e)},set:function(t,n){return set(t,e,n)}}}var hasExcape=/~/,escapeMatcher=/~[01]/g;exports.get=get,exports.set=set,exports.compile=compile;