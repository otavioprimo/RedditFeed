function stripBOM(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}function intercept(t,e){var n=stripBOM(fs.readFileSync(e,"utf8"));amdefineRegExp.test(t.id)||(n=inserted+n),t._compile(n,e)}var inserted,Module=require("module"),fs=require("fs"),existingExtFn=Module._extensions[".js"],amdefineRegExp=/amdefine\.js/;inserted="if (typeof define !== 'function') {var define = require('amdefine')(module)}",intercept._id="amdefine/intercept",existingExtFn._id&&existingExtFn._id===intercept._id||(Module._extensions[".js"]=intercept);