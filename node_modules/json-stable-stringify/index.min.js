var json="undefined"!=typeof JSON?JSON:require("jsonify");module.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n=e.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var r="boolean"==typeof e.cycles?e.cycles:!1,i=e.replacer||function(t,e){return e},o=e.cmp&&function(t){return function(e){return function(n,r){var i={key:n,value:e[n]},o={key:r,value:e[r]};return t(i,o)}}}(e.cmp),s=[];return function a(t,e,c,u){var l=n?"\n"+new Array(u+1).join(n):"",h=n?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),c=i.call(t,e,c),void 0!==c){if("object"!=typeof c||null===c)return json.stringify(c);if(isArray(c)){for(var p=[],f=0;f<c.length;f++){var d=a(c,f,c[f],u+1)||json.stringify(null);p.push(l+n+d)}return"["+p.join(",")+l+"]"}if(-1!==s.indexOf(c)){if(r)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}s.push(c);for(var _=objectKeys(c).sort(o&&o(c)),p=[],f=0;f<_.length;f++){var e=_[f],g=a(c,e,c[e],u+1);if(g){var y=json.stringify(e)+h+g;p.push(l+n+y)}}return s.splice(s.indexOf(c),1),"{"+p.join(",")+l+"}"}}({"":t},"",t,0)};var isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},objectKeys=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in t)e.call(t,r)&&n.push(r);return n};