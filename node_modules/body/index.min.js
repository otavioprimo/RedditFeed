function parseBodyThunk(t,e,n){return function(e){var r="limit"in n?n.limit:ONE_MB,i=t.headers?Number(t.headers["content-length"]):null;rawBody(t,{limit:r,length:i,encoding:"encoding"in n?n.encoding:!0},e)}}function body(t,e,n,r){var i=parseArguments(t,e,n,r);t=i.req,e=i.res,n=i.opts,r=i.callback;var o;if(n.cache){var o=t[THUNK_KEY]||cache(parseBodyThunk(t,e,n));t[THUNK_KEY]=o}else o=parseBodyThunk(t,e,n);return r?void o(r):o}var rawBody=require("raw-body"),cache=require("continuable-cache"),parseArguments=require("./parse-arguments.js"),ONE_MB=1048576,THUNK_KEY="__npm_body_thunk_cache__";module.exports=body;