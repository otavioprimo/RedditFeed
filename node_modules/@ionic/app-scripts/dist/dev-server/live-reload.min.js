"use strict";function createLiveReloadServer(e){function r(r){if(!logger_diagnostics_1.hasDiagnostics(e.buildDir)){var n=Array.isArray(r)?r:[r];t.changed({body:{files:n.map(function(t){return"/"+path.relative(e.wwwDir,t)})}})}}var t=tinylr();t.listen(e.liveReloadPort,e.host),events.on(events.EventType.FileChange,r),events.on(events.EventType.ReloadApp,function(){r("index.html")})}function injectLiveReloadScript(e,t,r){var n=e.toString(),i=getLiveReloadScript(t,r);if(n.indexOf("/livereload.js")>-1)return e;var o=n.match(/<\/body>(?![\s\S]*<\/body>)/i);return o||(o=n.match(/<\/html>(?![\s\S]*<\/html>)/i)),o?n=n.replace(o[0],i+"\n"+o[0]):n+=i,n}function getLiveReloadScript(e,t){var r="//"+e+":"+t+"/livereload.js?snipver=1";return'  <!-- Ionic Dev Server: Injected LiveReload Script -->\n  <script src="'+r+'" async="" defer=""></script>'}var logger_diagnostics_1=require("../logger/logger-diagnostics"),path=require("path"),tinylr=require("tiny-lr"),events=require("../util/events");exports.createLiveReloadServer=createLiveReloadServer,exports.injectLiveReloadScript=injectLiveReloadScript;