"use strict";function cleancss(e,t){e=config_1.generateContext(e),t=config_1.getUserConfigFile(e,taskInfo,t);var r=new logger_1.Logger("cleancss");return worker_client_1.runWorker("cleancss","cleancssWorker",e,t).then(function(){r.finish()})["catch"](function(e){throw r.fail(e)})}function cleancssWorker(e,t){return new Promise(function(r,n){var i=config_1.fillConfigDefaults(t,taskInfo.defaultConfigFile),o=path_1.join(e.buildDir,i.sourceFileName),s=path_1.join(e.buildDir,i.destFileName);logger_1.Logger.debug("cleancss read: "+o),helpers_1.readFileAsync(o).then(function(e){var t=new cleanCss;t.minify(e,function(e,t){e?n(new errors_1.BuildError(e)):t.errors&&t.errors.length>0?(t.errors.forEach(function(e){logger_1.Logger.error(e)}),n(new errors_1.BuildError)):(logger_1.Logger.debug("cleancss write: "+s),helpers_1.writeFileAsync(s,t.styles).then(function(){r()}))})})})}var path_1=require("path"),errors_1=require("./util/errors"),config_1=require("./util/config"),logger_1=require("./logger/logger"),helpers_1=require("./util/helpers"),worker_client_1=require("./worker-client"),cleanCss=require("clean-css");exports.cleancss=cleancss,exports.cleancssWorker=cleancssWorker;var taskInfo={fullArg:"--cleancss",shortArg:"-e",envVar:"IONIC_CLEANCSS",packageConfig:"ionic_cleancss",defaultConfigFile:"cleancss.config"};