"use strict";var file_cache_1=require("../util/file-cache"),path_1=require("path"),ion_compiler_1=require("../plugins/ion-compiler"),importer="/Users/dan/Dev/ionic-conference-app/src/app/app.module.ts";describe("ion-compiler",function(){describe("resolveId",function(){it("should return null when given an undefined/null import",function(){var e=ion_compiler_1.resolveId(null,"",null);expect(e).toEqual(null)}),it("should return null when tsfiles is undefined/null",function(){var e={};e.fileCache=null;var t=ion_compiler_1.resolveId("importee",importer,e);expect(t).toEqual(null)}),it("should return null when importer is not found in list of files",function(){var e={};e.fileCache=new file_cache_1.FileCache;var t=ion_compiler_1.resolveId("importee",importer,e);expect(t).toEqual(null)}),it("should return null when importer content is null",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:null});var t=ion_compiler_1.resolveId("importee",importer,e);expect(t).toEqual(null)}),it("should return null when importer content is empty",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:""});var t=ion_compiler_1.resolveId("importee",importer,e);expect(t).toEqual(null)}),it("should return path to file when file is found with ref to forward dir",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:"fake irrelevant data"});var t="./test-folder",r=path_1.dirname(importer),n=path_1.resolve(path_1.join(r,t))+".ts";e.fileCache.set(n,{path:n,content:"someContent"});var i=ion_compiler_1.resolveId(t,importer,e);expect(i).toEqual(n)}),it("should return path to file when file is found with ref to backward dir",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:"fake irrelevant data"});var t="../pages/test-folder",r=path_1.dirname(importer),n=path_1.resolve(path_1.join(r,t))+".ts";e.fileCache.set(n,{path:n,content:null});var i=ion_compiler_1.resolveId(t,importer,e);expect(i).toEqual(n)}),it("should return path to index file when file is found but index file is for forward path",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:"fake irrelevant data"});var t="./test-folder",r=path_1.dirname(importer),n=path_1.join(path_1.resolve(path_1.join(r,t)),"index.ts");e.fileCache.set(n,{path:n,content:null});var i=ion_compiler_1.resolveId(t,importer,e);expect(i).toEqual(n)}),it("should return path to index file when file is found but index file is for backward path",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:"fake irrelevant data"});var t="../pages/test-folder",r=path_1.dirname(importer),n=path_1.join(path_1.resolve(path_1.join(r,t)),"index.ts");e.fileCache.set(n,{path:n,content:null});var i=ion_compiler_1.resolveId(t,importer,e);expect(i).toEqual(n)}),it("should return null when importee isn't found in memory",function(){var e={};e.fileCache=new file_cache_1.FileCache,e.fileCache.set(importer,{path:importer,content:"fake irrelevant data"});var t="../pages/test-folder",r=ion_compiler_1.resolveId(t,importer,e);expect(r).toEqual(null)})})});