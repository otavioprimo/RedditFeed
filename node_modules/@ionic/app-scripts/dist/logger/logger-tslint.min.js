"use strict";function runTsLintDiagnostics(e,t){return t.map(function(t){return loadDiagnostic(e,t)})}function loadDiagnostic(e,t){var r=t.startPosition.toJson(),n=t.endPosition.toJson(),i={level:"warn",type:"tslint",language:"typescript",absFileName:t.fileName,relFileName:logger_1.Logger.formatFileName(e.rootDir,t.fileName),header:logger_1.Logger.formatHeader("tslint",t.fileName,e.rootDir,r.line+1,n.line+1),code:t.ruleName,messageText:t.failure,lines:[]};if(t.sourceFile&&t.sourceFile.text){for(var o=helpers_1.splitLineBreaks(t.sourceFile.text),s=r.line;s<=n.line;s++)if(o[s].trim().length){for(var a={lineIndex:s,lineNumber:s+1,text:o[s],html:o[s],errorCharStart:s===r.line?r.character:s===n.line?n.character:-1,errorLength:0},u=a.errorCharStart;u<a.text.length&&!(STOP_CHARS.indexOf(a.text.charAt(u))>-1);u++)a.errorLength++;0===a.errorLength&&a.errorCharStart>0&&(a.errorLength=1,a.errorCharStart--),i.lines.push(a)}if(r.line>0){var c={lineIndex:r.line-1,lineNumber:r.line,text:o[r.line-1],html:o[r.line-1],errorCharStart:-1,errorLength:-1};i.lines.unshift(c)}if(n.line<o.length){var l={lineIndex:n.line+1,lineNumber:n.line+2,text:o[n.line+1],html:o[n.line+1],errorCharStart:-1,errorLength:-1};i.lines.push(l)}}return i}var logger_1=require("./logger"),helpers_1=require("../util/helpers");exports.runTsLintDiagnostics=runTsLintDiagnostics;var STOP_CHARS=[" ","=",",",".","	","{","}","(",")",'"',"'","`","?",":",";","+","-","*","/","<",">","&","[","]","|"];