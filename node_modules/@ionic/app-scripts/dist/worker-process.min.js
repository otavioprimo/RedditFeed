"use strict";function taskResolve(e,t,r){var n={taskModule:e,taskWorker:t,resolve:r,pid:process.pid};logger_1.Logger.debug("worker resolve, taskModule: "+n.taskModule+", pid: "+n.pid),process.send(n)}function taskReject(e,t,r){var n={taskModule:e,taskWorker:t,reject:new errors_1.BuildError(r).toJson(),pid:process.pid};logger_1.Logger.debug("worker reject, taskModule: "+n.taskModule+", pid: "+n.pid),process.send(n)}function taskError(e,t,r){var n={taskModule:e,taskWorker:t,error:new errors_1.BuildError(r).toJson(),pid:process.pid};logger_1.Logger.debug("worker error, taskModule: "+n.taskModule+", pid: "+n.pid),process.send(n)}var errors_1=require("./util/errors"),logger_1=require("./logger/logger");process.on("message",function(e){try{var t="./"+e.taskModule,r=require(t)[e.taskWorker];r(e.context,e.workerConfig).then(function(t){taskResolve(e.taskModule,e.taskWorker,t)},function(t){taskReject(e.taskModule,e.taskWorker,t)})["catch"](function(t){taskError(e.taskModule,e.taskWorker,t)})}catch(n){taskError(e.taskModule,e.taskWorker,n),process.exit(1)}});