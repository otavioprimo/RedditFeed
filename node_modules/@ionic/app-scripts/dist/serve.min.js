"use strict";function serve(e){e=config_1.generateContext(e);var t={httpPort:getHttpServerPort(e),host:getHttpServerHost(e),rootDir:e.rootDir,wwwDir:e.wwwDir,buildDir:e.buildDir,launchBrowser:launchBrowser(e),launchLab:launchLab(e),browserToLaunch:browserToLaunch(e),useLiveReload:useLiveReload(e),liveReloadPort:getLiveReloadServerPort(e),notificationPort:getNotificationPort(e),useServerLogs:useServerLogs(e),useProxy:useProxy(e),notifyOnConsoleLog:sendClientConsoleLogs(e)};return notification_server_1.createNotificationServer(t),live_reload_1.createLiveReloadServer(t),http_server_1.createHttpServer(t),watch_1.watch(e).then(function(){onReady(t,e)},function(){onReady(t,e)})["catch"](function(){onReady(t,e)})}function onReady(e,t){var r="0.0.0.0"===e.host?"localhost":e.host;if(e.launchBrowser||e.launchLab){var n=["http://"+r+":"+e.httpPort].concat(launchLab(t)?[serve_config_1.IONIC_LAB_URL]:[]).concat(browserOption(t)?[browserOption(t)]:[]).concat(platformOption(t)?["?ionicplatform=",platformOption(t)]:[]);open_1["default"](n.join(""),browserToLaunch(t))}logger_1.Logger.info("dev server running: http://"+r+":"+e.httpPort+"/","green",!0),logger_1.Logger.newLine()}function getHttpServerPort(e){var t=config_1.getConfigValue(e,"--port","-p","IONIC_PORT","ionic_port",null);return t?parseInt(t,10):DEV_SERVER_DEFAULT_PORT}function getHttpServerHost(e){var t=config_1.getConfigValue(e,"--address","-h","IONIC_ADDRESS","ionic_address",null);return t?t:DEV_SERVER_DEFAULT_HOST}function getLiveReloadServerPort(e){var t=config_1.getConfigValue(e,"--livereload-port",null,"IONIC_LIVERELOAD_PORT","ionic_livereload_port",null);return t?parseInt(t,10):LIVE_RELOAD_DEFAULT_PORT}function getNotificationPort(e){var t=config_1.getConfigValue(e,"--dev-logger-port",null,"IONIC_DEV_LOGGER_PORT","ionic_dev_logger_port",null);return t?parseInt(t,10):DEV_LOGGER_DEFAULT_PORT}function useServerLogs(e){return config_1.hasConfigValue(e,"--serverlogs","-s","ionic_serverlogs",!1)}function launchBrowser(e){return!config_1.hasConfigValue(e,"--nobrowser","-b","ionic_launch_browser",!1)}function browserToLaunch(e){return config_1.getConfigValue(e,"--browser","-w","IONIC_BROWSER","ionic_browser",null)}function browserOption(e){return config_1.getConfigValue(e,"--browseroption","-o","IONIC_BROWSEROPTION","ionic_browseroption",null)}function launchLab(e){return config_1.hasConfigValue(e,"--lab","-l","ionic_lab",!1)}function platformOption(e){return config_1.getConfigValue(e,"--platform","-t","IONIC_PLATFORM_BROWSER","ionic_platform_browser",null)}function useLiveReload(e){return!config_1.hasConfigValue(e,"--nolivereload","-d","ionic_livereload",!1)}function useProxy(e){return!config_1.hasConfigValue(e,"--noproxy","-x","ionic_proxy",!1)}function sendClientConsoleLogs(e){return config_1.hasConfigValue(e,"--consolelogs","-c","ionic_consolelogs",!1)}var config_1=require("./util/config"),logger_1=require("./logger/logger"),watch_1=require("./watch"),open_1=require("./util/open"),notification_server_1=require("./dev-server/notification-server"),http_server_1=require("./dev-server/http-server"),live_reload_1=require("./dev-server/live-reload"),serve_config_1=require("./dev-server/serve-config"),DEV_LOGGER_DEFAULT_PORT=53703,LIVE_RELOAD_DEFAULT_PORT=35729,DEV_SERVER_DEFAULT_PORT=8100,DEV_SERVER_DEFAULT_HOST="0.0.0.0";exports.serve=serve,exports.getNotificationPort=getNotificationPort;