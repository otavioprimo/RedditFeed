(function(){var e,t,r,n,i,o,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;e=require("./prefixer"),o=require("./utils"),r=require("num2fraction"),n=/(min|max)-resolution\s*:\s*\d*\.?\d+(dppx|dpi)/gi,i=/(min|max)-resolution(\s*:\s*)(\d*\.?\d+)(dppx|dpi)/i,t=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.prefixName=function(e,t){return t="-moz-"===e?t+"--moz-device-pixel-ratio":e+t+"-device-pixel-ratio"},t.prototype.prefixQuery=function(e,t,n,i,o){return"dpi"===o&&(i=Number(i/96)),"-o-"===e&&(i=r(i)),this.prefixName(e,t)+n+i},t.prototype.clean=function(e){var t,r,n,i;if(!this.bad)for(this.bad=[],i=this.prefixes,t=0,r=i.length;r>t;t++)n=i[t],this.bad.push(this.prefixName(n,"min")),this.bad.push(this.prefixName(n,"max"));return e.params=o.editList(e.params,function(e){return function(t){return t.filter(function(t){return e.bad.every(function(e){return-1===t.indexOf(e)})})}}(this))},t.prototype.process=function(e){var t,r;return t=this.parentPrefix(e),r=t?[t]:this.prefixes,e.params=o.editList(e.params,function(t){return function(a,s){var u,l,c,p,f,h,d;for(u=0,c=a.length;c>u;u++)if(d=a[u],-1!==d.indexOf("min-resolution")||-1!==d.indexOf("max-resolution")){for(l=0,p=r.length;p>l;l++)f=r[l],("-moz-"!==f||-1===e.params.indexOf("dpi"))&&(h=d.replace(n,function(e){var r;return r=e.match(i),t.prefixQuery(f,r[1],r[2],r[3],r[4])}),s.push(h));s.push(d)}else s.push(d);return o.uniq(s)}}(this))},t}(e),module.exports=t}).call(this);