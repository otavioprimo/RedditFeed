(function(){var e,t,r,n,i;i=require("postcss/lib/vendor"),r=require("./value"),n=require("./utils"),e=/(^|[^-])(linear|radial)-gradient\(\s*(top|left|right|bottom)/i,t=function(){function t(e){this.prefixes=e}return t.prototype.add=function(t,n){var i,o,a,s;return o=this.prefixes.add["@resolution"],i=this.prefixes.add["@keyframes"],s=this.prefixes.add["@viewport"],a=this.prefixes.add["@supports"],t.walkAtRules(function(e){return function(t){if("keyframes"===t.name){if(!e.disabled(t))return null!=i?i.process(t):void 0}else if("viewport"===t.name){if(!e.disabled(t))return null!=s?s.process(t):void 0}else if("supports"===t.name){if(e.prefixes.options.supports!==!1&&!e.disabled(t))return a.process(t)}else if("media"===t.name&&-1!==t.params.indexOf("-resolution")&&!e.disabled(t))return null!=o?o.process(t):void 0}}(this)),t.walkRules(function(e){return function(t){var r,i,o,a,s;if(!e.disabled(t)){for(o=e.prefixes.add.selectors,a=[],r=0,i=o.length;i>r;r++)s=o[r],a.push(s.process(t,n));return a}}}(this)),t.walkDecls(function(t){return function(r){var i,o;if(!t.disabled(r)){if("display"===r.prop&&"box"===r.value)return void n.warn("You should write display: flex by final spec instead of display: box",{node:r});if(-1!==r.value.indexOf("linear-gradient")&&e.test(r.value)&&n.warn("Gradient has outdated direction syntax. New syntax is like `to left` instead of `right`.",{node:r}),"text-emphasis-position"===r.prop&&("under"===r.value||"over"===r.value)&&n.warn("You should use 2 values for text-emphasis-position For example, `under left` instead of just `under`.",{node:r}),-1!==r.value.indexOf("fill-available")&&n.warn("Replace fill-available to fill, because spec had been changed",{node:r}),t.prefixes.options.flexbox!==!1&&("grid-row-end"===r.prop&&-1===r.value.indexOf("span")&&n.warn("IE supports only grid-row-end with span. You should add grid: false option to Autoprefixer and use some JS grid polyfill for full spec support",{node:r}),"grid-row"===r.prop&&-1!==r.value.indexOf("/")&&-1===r.value.indexOf("span")&&n.warn("IE supports only grid-row with / and span. You should add grid: false option to Autoprefixer and use some JS grid polyfill for full spec support",{node:r})),"transition"===r.prop||"transition-property"===r.prop)return t.prefixes.transition.add(r,n);if("align-items"===r.prop){if(i=t.displayType(r),"grid"!==i&&t.prefixes.options.flexbox!==!1&&(o=t.prefixes.add["align-items"],o&&o.prefixes&&o.process(r)),"flex"!==i&&t.prefixes.options.grid!==!1&&(o=t.prefixes.add["grid-row-align"],o&&o.prefixes))return o.process(r)}else if(o=t.prefixes.add[r.prop],o&&o.prefixes)return o.process(r)}}}(this)),t.walkDecls(function(e){return function(t){var i,o,a,s,u;if(!e.disabled(t)){for(s=e.prefixes.unprefixed(t.prop),a=e.prefixes.values("add",s),i=0,o=a.length;o>i;i++)u=a[i],u.process(t,n);return r.save(e.prefixes,t)}}}(this))},t.prototype.remove=function(e){var t,r,n,i,o;for(o=this.prefixes.remove["@resolution"],e.walkAtRules(function(e){return function(t,r){if(e.prefixes.remove["@"+t.name]){if(!e.disabled(t))return t.parent.removeChild(r)}else if("media"===t.name&&-1!==t.params.indexOf("-resolution"))return null!=o?o.clean(t):void 0}}(this)),i=this.prefixes.remove.selectors,r=0,n=i.length;n>r;r++)t=i[r],e.walkRules(function(e){return function(r,n){return t.check(r)&&!e.disabled(r)?r.parent.removeChild(n):void 0}}(this));return e.walkDecls(function(e){return function(r,n){var i,o,a,s,u,l,c;if(!e.disabled(r)){if(l=r.parent,c=e.prefixes.unprefixed(r.prop),("transition"===r.prop||"transition-property"===r.prop)&&e.prefixes.transition.remove(r),(null!=(s=e.prefixes.remove[r.prop])?s.remove:void 0)&&(a=e.prefixes.group(r).down(function(t){return e.prefixes.normalize(t.prop)===c}),a&&!e.withHackValue(r)))return r.raw("before").indexOf("\n")>-1&&e.reduceSpaces(r),void l.removeChild(n);for(u=e.prefixes.values("remove",c),i=0,o=u.length;o>i;i++)if(t=u[i],t.check(r.value)){if(c=t.unprefixed,a=e.prefixes.group(r).down(function(e){return-1!==e.value.indexOf(c)}))return void l.removeChild(n);if(t.clean)return void t.clean(r)}}}}(this))},t.prototype.withHackValue=function(e){return"-webkit-background-clip"===e.prop&&"text"===e.value},t.prototype.disabled=function(e){var t,r;if(this.prefixes.options.grid===!1&&"decl"===e.type){if("display"===e.prop&&-1!==e.value.indexOf("grid"))return!0;if(-1!==e.prop.indexOf("grid")||"justify-items"===e.prop)return!0}if(this.prefixes.options.flexbox===!1&&"decl"===e.type){if("display"===e.prop&&-1!==e.value.indexOf("flex"))return!0;if(t=["order","justify-content","align-self","align-content"],-1!==e.prop.indexOf("flex")||-1!==t.indexOf(e.prop))return!0}return null!=e._autoprefixerDisabled?e._autoprefixerDisabled:e.nodes?(r=void 0,e.each(function(e){return"comment"===e.type?/(!\s*)?autoprefixer:\s*off/i.test(e.text)?(r=!1,!1):/(!\s*)?autoprefixer:\s*on/i.test(e.text)?(r=!0,!1):void 0:void 0}),e._autoprefixerDisabled=null!=r?!r:e.parent?this.disabled(e.parent):!1):e.parent?e._autoprefixerDisabled=this.disabled(e.parent):!1},t.prototype.reduceSpaces=function(e){var t,r,n,i;return i=!1,this.prefixes.group(e).up(function(e){return i=!0}),i?void 0:(r=e.raw("before").split("\n"),n=r[r.length-1].length,t=!1,this.prefixes.group(e).down(function(e){var i;return r=e.raw("before").split("\n"),i=r.length-1,r[i].length>n?(t===!1&&(t=r[i].length-n),r[i]=r[i].slice(0,-t),e.raws.before=r.join("\n")):void 0}))},t.prototype.displayType=function(e){var t,r,n,i;for(i=e.parent.nodes,r=0,n=i.length;n>r;r++)if(t=i[r],"display"===t.prop){if(-1!==t.value.indexOf("flex"))return"flex";if(-1!==t.value.indexOf("grid"))return"grid"}return!1},t}(),module.exports=t}).call(this);