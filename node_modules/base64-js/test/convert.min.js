function map(e,t){for(var n,i,r=[],o=0,s=e.length;s>o;o++)"string"==typeof e&&e.charAt(o)?(n=e.charAt(o),i=t(n,o,e),r[o]=i):"string"!=typeof e&&o in e&&(n=e[o],i=t(n,o,e),r[o]=i);return r}var test=require("tape"),b64=require("../"),checks=["a","aa","aaa","hi","hi!","hi!!","sup","sup?","sup?!"];test("convert to base64 and back",function(e){e.plan(2*checks.length);for(var t=0;t<checks.length;t++){var n,i,o,r=checks[t];n=b64.fromByteArray(map(r,function(e){return e.charCodeAt(0)})),i=b64.toByteArray(n),o=map(i,function(e){return String.fromCharCode(e)}).join(""),e.equal(r,o,"Checked "+r),e.equal(b64.byteLength(n),i.length,"Checked length for "+r)}});