"use strict";function parsePatch(e){function a(){var e={};for(n.push(e);i<r.length;){var a=r[i];if(/^(\-\-\-|\+\+\+|@@)\s/.test(a))break;var u=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(a);u&&(e.index=u[1]),i++}for(o(e),o(e),e.hunks=[];i<r.length;){var l=r[i];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(l))break;if(/^@@/.test(l))e.hunks.push(s());else{if(l&&t.strict)throw new Error("Unknown line "+(i+1)+" "+JSON.stringify(l));i++}}}function o(e){var t=/^(\-\-\-|\+\+\+)\s+(\S*)\s?(.*?)\s*$/.exec(r[i]);if(t){var n="---"===t[1]?"old":"new";e[n+"FileName"]=t[2],e[n+"Header"]=t[3],i++}}function s(){for(var e=i,n=r[i++],a=n.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),o={oldStart:+a[1],oldLines:+a[2]||1,newStart:+a[3],newLines:+a[4]||1,lines:[]},s=0,u=0;i<r.length;i++){var l=r[i][0];if("+"!==l&&"-"!==l&&" "!==l&&"\\"!==l)break;o.lines.push(r[i]),"+"===l?s++:"-"===l?u++:" "===l&&(s++,u++)}if(s||1!==o.newLines||(o.newLines=0),u||1!==o.oldLines||(o.oldLines=0),t.strict){if(s!==o.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(u!==o.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return o}for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e.split("\n"),n=[],i=0;i<r.length;)a();return n}exports.__esModule=!0,exports.parsePatch=parsePatch;