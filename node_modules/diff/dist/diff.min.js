!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JsDiff=t():e.JsDiff=t()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";function m(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.canonicalize=t.convertChangesToXML=t.convertChangesToDMP=t.parsePatch=t.applyPatches=t.applyPatch=t.createPatch=t.createTwoFilesPatch=t.structuredPatch=t.diffJson=t.diffCss=t.diffSentences=t.diffTrimmedLines=t.diffLines=t.diffWordsWithSpace=t.diffWords=t.diffChars=t.Diff=void 0;var n=r(1),i=m(n),a=r(2),o=r(3),s=r(5),u=r(6),l=r(7),c=r(8),f=r(9),p=r(10),h=r(12),d=r(13),v=r(14);t.Diff=i["default"],t.diffChars=a.diffChars,t.diffWords=o.diffWords,t.diffWordsWithSpace=o.diffWordsWithSpace,t.diffLines=s.diffLines,t.diffTrimmedLines=s.diffTrimmedLines,t.diffSentences=u.diffSentences,t.diffCss=l.diffCss,t.diffJson=c.diffJson,t.structuredPatch=h.structuredPatch,t.createTwoFilesPatch=h.createTwoFilesPatch,t.createPatch=h.createPatch,t.applyPatch=f.applyPatch,t.applyPatches=f.applyPatches,t.parsePatch=p.parsePatch,t.convertChangesToDMP=d.convertChangesToDMP,t.convertChangesToXML=v.convertChangesToXML,t.canonicalize=c.canonicalize},function(e,t){"use strict";function r(){}function n(e,t,r,n,i){for(var a=0,o=t.length,s=0,u=0;o>a;a++){var l=t[a];if(l.removed){if(l.value=n.slice(u,u+l.count).join(""),u+=l.count,a&&t[a-1].added){var f=t[a-1];t[a-1]=t[a],t[a]=f}}else{if(!l.added&&i){var c=r.slice(s,s+l.count);c=c.map(function(e,t){var r=n[u+t];return r.length>e.length?r:e}),l.value=c.join("")}else l.value=r.slice(s,s+l.count).join("");s+=l.count,l.added||(u+=l.count)}}var p=t[o-1];return o>1&&(p.added||p.removed)&&e.equals("",p.value)&&(t[o-2].value+=p.value,t.pop()),t}function i(e){return{newPos:e.newPos,components:e.components.slice(0)}}t.__esModule=!0,t["default"]=r,r.prototype={diff:function(e,t){function s(e){return a?(setTimeout(function(){a(void 0,e)},0),!0):e}function d(){for(var r=-1*c;c>=r;r+=2){var a=void 0,f=p[r-1],h=p[r+1],d=(h?h.newPos:0)-r;f&&(p[r-1]=void 0);var v=f&&f.newPos+1<u,m=h&&d>=0&&l>d;if(v||m){if(!v||m&&f.newPos<h.newPos?(a=i(h),o.pushComponent(a.components,void 0,!0)):(a=f,a.newPos++,o.pushComponent(a.components,!0,void 0)),d=o.extractCommon(a,t,e,r),a.newPos+1>=u&&d+1>=l)return s(n(o,a.components,t,e,o.useLongestToken));p[r]=a}else p[r]=void 0}c++}var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=r.callback;"function"==typeof r&&(a=r,r={}),this.options=r;var o=this;e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var u=t.length,l=e.length,c=1,f=u+l,p=[{newPos:-1,components:[]}],h=this.extractCommon(p[0],t,e,0);if(p[0].newPos+1>=u&&h+1>=l)return s([{value:t.join(""),count:t.length}]);if(a)!function m(){setTimeout(function(){return c>f?a():void(d()||m())},0)}();else for(;f>=c;){var v=d();if(v)return v}},pushComponent:function(e,t,r){var n=e[e.length-1];n&&n.added===t&&n.removed===r?e[e.length-1]={count:n.count+1,added:t,removed:r}:e.push({count:1,added:t,removed:r})},extractCommon:function(e,t,r,n){for(var i=t.length,a=r.length,o=e.newPos,s=o-n,u=0;i>o+1&&a>s+1&&this.equals(t[o+1],r[s+1]);)o++,s++,u++;return u&&e.components.push({count:u}),e.newPos=o,s},equals:function(e,t){return e===t},removeEmpty:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")}}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,r){return o.diff(e,t,r)}t.__esModule=!0,t.characterDiff=void 0,t.diffChars=s;var n=r(1),i=a(n),o=t.characterDiff=new i["default"]},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function c(e,t,r){var n=a.generateOptions(r,{ignoreWhitespace:!0});return l.diff(e,t,n)}function f(e,t,r){return l.diff(e,t,r)}t.__esModule=!0,t.wordDiff=void 0,t.diffWords=c,t.diffWordsWithSpace=f;var n=r(1),i=o(n),a=r(4),s=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,u=/\S/,l=t.wordDiff=new i["default"];l.equals=function(e,t){return e===t||this.options.ignoreWhitespace&&!u.test(e)&&!u.test(t)},l.tokenize=function(e){for(var t=e.split(/(\s+|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&s.test(t[r])&&s.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t}},function(e,t){"use strict";function r(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}t.__esModule=!0,t.generateOptions=r},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t,r){return s.diff(e,t,r)}function l(e,t,r){var n=a.generateOptions(r,{ignoreWhitespace:!0});return s.diff(e,t,n)}t.__esModule=!0,t.lineDiff=void 0,t.diffLines=u,t.diffTrimmedLines=l;var n=r(1),i=o(n),a=r(4),s=t.lineDiff=new i["default"];s.tokenize=function(e){var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,r){return o.diff(e,t,r)}t.__esModule=!0,t.sentenceDiff=void 0,t.diffSentences=s;var n=r(1),i=a(n),o=t.sentenceDiff=new i["default"];o.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,r){return o.diff(e,t,r)}t.__esModule=!0,t.cssDiff=void 0,t.diffCss=s;var n=r(1),i=a(n),o=t.cssDiff=new i["default"];o.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function c(e,t,r){return l.diff(e,t,r)}function f(e,t,r){t=t||[],r=r||[];var i=void 0;for(i=0;i<t.length;i+=1)if(t[i]===e)return r[i];var a=void 0;if("[object Array]"===u.call(e)){for(t.push(e),a=new Array(e.length),r.push(a),i=0;i<e.length;i+=1)a[i]=f(e[i],t,r);return t.pop(),r.pop(),a}if(e&&e.toJSON&&(e=e.toJSON()),"object"===("undefined"==typeof e?"undefined":n(e))&&null!==e){t.push(e),a={},r.push(a);var o=[],s=void 0;for(s in e)e.hasOwnProperty(s)&&o.push(s);for(o.sort(),i=0;i<o.length;i+=1)s=o[i],a[s]=f(e[s],t,r);t.pop(),r.pop()}else a=e;return a}t.__esModule=!0,t.jsonDiff=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.diffJson=c,t.canonicalize=f;var i=r(1),a=s(i),o=r(5),u=Object.prototype.toString,l=t.jsonDiff=new a["default"];l.useLongestToken=!0,l.tokenize=o.lineDiff.tokenize,l.castInput=function(e){return"string"==typeof e?e:JSON.stringify(f(e),void 0,"  ")},l.equals=function(e,t){return a["default"].prototype.equals(e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){function d(e,t){for(var r=0;r<e.lines.length;r++){var n=e.lines[r],a=n[0],o=n.substr(1);if(" "===a||"-"===a){if(!s(t+1,i[t],a,o)&&(u++,u>l))return!1;t++}}return!0}var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if("string"==typeof t&&(t=n.parsePatch(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}for(var i=e.split("\n"),o=t.hunks,s=r.compareLine||function(e,t,r,n){return t===n},u=0,l=r.fuzzFactor||0,c=0,f=0,p=void 0,h=void 0,v=0;v<o.length;v++){for(var m=o[v],g=i.length-m.oldLines,y=0,b=f+m.oldStart-1,_=a["default"](b,c,g);void 0!==y;y=_())if(d(m,b+y)){m.offset=f+=y;break}if(void 0===y)return!1;c=m.offset+m.oldStart+m.oldLines}for(var w=0;w<o.length;w++){var x=o[w],E=x.offset+x.newStart-1;0==x.newLines&&E++;for(var S=0;S<x.lines.length;S++){var k=x.lines[S],C=k[0],A=k.substr(1);if(" "===C)E++;else if("-"===C)i.splice(E,1);else if("+"===C)i.splice(E,0,A),E++;else if("\\"===C){var P=x.lines[S-1]?x.lines[S-1][0]:null;"+"===P?p=!0:"-"===P&&(h=!0)}}}if(p)for(;!i[i.length-1];)i.pop();else h&&i.push("");return i.join("\n")}function u(e,t){function i(){var n=e[r++];return n?void t.loadFile(n,function(e,r){if(e)return t.complete(e);var a=s(r,n,t);t.patched(n,a),setTimeout(i,0)}):t.complete()}"string"==typeof e&&(e=n.parsePatch(e));var r=0;i()}t.__esModule=!0,t.applyPatch=s,t.applyPatches=u;var n=r(10),i=r(11),a=o(i)},function(e,t){"use strict";function r(e){function a(){var e={};for(n.push(e);i<r.length;){var a=r[i];if(/^(\-\-\-|\+\+\+|@@)\s/.test(a))break;var u=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(a);u&&(e.index=u[1]),i++}for(o(e),o(e),e.hunks=[];i<r.length;){var l=r[i];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(l))break;if(/^@@/.test(l))e.hunks.push(s());else{if(l&&t.strict)throw new Error("Unknown line "+(i+1)+" "+JSON.stringify(l));i++}}}function o(e){var t=/^(\-\-\-|\+\+\+)\s+(\S*)\s?(.*?)\s*$/.exec(r[i]);if(t){var n="---"===t[1]?"old":"new";e[n+"FileName"]=t[2],e[n+"Header"]=t[3],i++}}function s(){for(var e=i,n=r[i++],a=n.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),o={oldStart:+a[1],oldLines:+a[2]||1,newStart:+a[3],newLines:+a[4]||1,lines:[]},s=0,u=0;i<r.length;i++){var l=r[i][0];if("+"!==l&&"-"!==l&&" "!==l&&"\\"!==l)break;o.lines.push(r[i]),"+"===l?s++:"-"===l?u++:" "===l&&(s++,u++)}if(s||1!==o.newLines||(o.newLines=0),u||1!==o.oldLines||(o.oldLines=0),t.strict){if(s!==o.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(u!==o.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return o}for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e.split("\n"),n=[],i=0;i<r.length;)a();return n}t.__esModule=!0,t.parsePatch=r},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t,r){var n=!0,i=!1,a=!1,o=1;return function s(){if(n&&!a){if(i?o++:n=!1,r>=e+o)return o;a=!0}return i?void 0:(a||(n=!0),e-o>=t?-o++:(i=!0,s()))}}},function(e,t,r){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t,r,a,o,s,u){function c(e){return e.map(function(e){return" "+e})}u||(u={context:4});var l=n.diffLines(r,a);l.push({value:"",lines:[]});for(var f=[],p=0,h=0,d=[],v=1,m=1,g=function(e){var t=l[e],n=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=n,t.added||t.removed){var o;if(!p){var s=l[e-1];p=v,h=m,s&&(d=u.context>0?c(s.lines.slice(-u.context)):[],p-=d.length,h-=d.length)}(o=d).push.apply(o,i(n.map(function(e){return(t.added?"+":"-")+e}))),t.added?m+=n.length:v+=n.length}else{if(p)if(n.length<=2*u.context&&e<l.length-2){var g;(g=d).push.apply(g,i(c(n)))}else{var y,b=Math.min(n.length,u.context);(y=d).push.apply(y,i(c(n.slice(0,b))));var _={oldStart:p,oldLines:v-p+b,newStart:h,newLines:m-h+b,lines:d};if(e>=l.length-2&&n.length<=u.context){var w=/\n$/.test(r),x=/\n$/.test(a);0!=n.length||w?w&&x||d.push("\\ No newline at end of file"):d.splice(_.oldLines,0,"\\ No newline at end of file")}f.push(_),p=0,h=0,d=[]}v+=n.length,m+=n.length}},y=0;y<l.length;y++)g(y);return{oldFileName:e,newFileName:t,oldHeader:o,newHeader:s,hunks:f}}function o(e,t,r,n,i,o,s){var u=a(e,t,r,n,i,o,s),l=[];e==t&&l.push("Index: "+e),l.push("==================================================================="),l.push("--- "+u.oldFileName+("undefined"==typeof u.oldHeader?"":"	"+u.oldHeader)),l.push("+++ "+u.newFileName+("undefined"==typeof u.newHeader?"":"	"+u.newHeader));for(var c=0;c<u.hunks.length;c++){var f=u.hunks[c];l.push("@@ -"+f.oldStart+","+f.oldLines+" +"+f.newStart+","+f.newLines+" @@"),l.push.apply(l,f.lines)}return l.join("\n")+"\n"}function s(e,t,r,n,i,a){return o(e,e,t,r,n,i,a)}t.__esModule=!0,t.structuredPatch=a,t.createTwoFilesPatch=o,t.createPatch=s;var n=r(5)},function(e,t){"use strict";function r(e){for(var t=[],r=void 0,n=void 0,i=0;i<e.length;i++)r=e[i],n=r.added?1:r.removed?-1:0,t.push([n,r.value]);return t}t.__esModule=!0,t.convertChangesToDMP=r},function(e,t){"use strict";function r(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")}function n(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}t.__esModule=!0,t.convertChangesToXML=r}])});