!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/http"),require("rxjs/ReplaySubject"),require("rxjs/Subject"),require("rxjs/operator/take")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/http","rxjs/ReplaySubject","rxjs/Subject","rxjs/operator/take"],t):t((e.ng=e.ng||{},e.ng.http=e.ng.http||{},e.ng.http.testing=e.ng.http.testing||{}),e.ng.core,e.ng.http,e.Rx,e.Rx,e.Rx.Observable.prototype)}(this,function(e,t,r,n,i,o){"use strict";var s=function(){function e(e){this.response=o.take.call(new n.ReplaySubject(1),1),this.readyState=r.ReadyState.Open,this.request=e}return e.prototype.mockRespond=function(e){if(this.readyState===r.ReadyState.Done||this.readyState===r.ReadyState.Cancelled)throw new Error("Connection has already been resolved");this.readyState=r.ReadyState.Done,this.response.next(e),this.response.complete()},e.prototype.mockDownload=function(e){},e.prototype.mockError=function(e){this.readyState=r.ReadyState.Done,this.response.error(e)},e}(),a=function(){function e(){var e=this;this.connectionsArray=[],this.connections=new i.Subject,this.connections.subscribe(function(t){return e.connectionsArray.push(t)}),this.pendingConnections=new i.Subject}return e.prototype.verifyNoPendingRequests=function(){var e=0;if(this.pendingConnections.subscribe(function(t){return e++}),e>0)throw new Error(e+" pending connections to be resolved")},e.prototype.resolveAllConnections=function(){this.connections.subscribe(function(e){return e.readyState=4})},e.prototype.createConnection=function(e){if(!(e&&e instanceof r.Request))throw new Error("createConnection requires an instance of Request, got "+e);var t=new s(e);return this.connections.next(t),t},e.decorators=[{type:t.Injectable}],e.ctorParameters=[],e}();e.MockConnection=s,e.MockBackend=a});