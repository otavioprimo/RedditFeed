!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t((e.ng=e.ng||{},e.ng.core=e.ng.core||{},e.ng.core.testing=e.ng.core.testing||{}),e.ng.core)}(this,function(e,t){"use strict";function n(e){return r.jasmine?function(t){t||(t=function(){},t.fail=function(e){throw e}),i(e,t,function(e){return"string"==typeof e?t.fail(new Error(e)):void t.fail(e)})}:function(){return new Promise(function(t,r){i(e,t,r)})}}function i(e,t,r){var n=Zone.current,i=Zone.AsyncTestZoneSpec;if(void 0===i)throw new Error("AsyncTestZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/dist/async-test.js");var o=Zone.ProxyZoneSpec;if(void 0===o)throw new Error("ProxyZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/dist/proxy.js");var s=o.get();o.assertPresent();var a=Zone.current.getZoneWith("ProxyZoneSpec"),u=s.getDelegate();return a.parent.run(function(){var e=new i(function(){n.run(function(){s.getDelegate()==e&&s.setDelegate(u),t()})},function(t){n.run(function(){s.getDelegate()==e&&s.setDelegate(u),r(t)})},"test");s.setDelegate(e)}),Zone.current.runGuarded(e)}function o(e){Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function s(e){return void 0!==e&&null!==e}function a(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.overriddenName)return e.overriddenName;if(e.name)return e.name;var t=e.toString(),r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function h(){p=null,l.assertPresent().resetDelegate()}function v(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=l.assertPresent();if(f)throw new Error("fakeAsync() calls can not be nested");f=!0;try{if(!p){if(n.getDelegate()instanceof c)throw new Error("fakeAsync() calls can not be nested");p=new c}var i=void 0,o=n.getDelegate();n.setDelegate(p);try{i=e.apply(void 0,t),g()}finally{n.setDelegate(o)}if(p.pendingPeriodicTimers.length>0)throw new Error(p.pendingPeriodicTimers.length+" periodic timer(s) still in the queue.");if(p.pendingTimers.length>0)throw new Error(p.pendingTimers.length+" timer(s) still in the queue.");return i}finally{f=!1,h()}}}function d(){if(null==p)throw new Error("The code should be running in the fakeAsync zone to call this function");return p}function m(e){void 0===e&&(e=0),d().tick(e)}function y(){var e=d();e.pendingPeriodicTimers;e.pendingPeriodicTimers.length=0}function g(){d().flushMicrotasks()}function E(){throw new Error("unimplemented")}function D(){return N=N||new I}function R(e,t){var r=D();return e.indexOf(_)>=0?function(){return r.compileComponents().then(function(){var n=r.get(_);return r.execute(e,t),n.promise})}:function(){return r.execute(e,t)}}function F(e,t){return void 0===t&&(t=null),t?function(){var r=D();return e&&r.configureTestingModule(e),t()}:new L(function(){return e})}var r="undefined"==typeof window?global:window,u=function(){function e(e,r,n){var i=this;this.componentRef=e,this.ngZone=r,this._autoDetect=n,this._isStable=!0,this._isDestroyed=!1,this._promise=null,this._onUnstableSubscription=null,this._onStableSubscription=null,this._onMicrotaskEmptySubscription=null,this._onErrorSubscription=null,this.changeDetectorRef=e.changeDetectorRef,this.elementRef=e.location,this.debugElement=t.getDebugNode(this.elementRef.nativeElement),this.componentInstance=e.instance,this.nativeElement=this.elementRef.nativeElement,this.componentRef=e,this.ngZone=r,null!=r&&(this._onUnstableSubscription=r.onUnstable.subscribe({next:function(){i._isStable=!1}}),this._onMicrotaskEmptySubscription=r.onMicrotaskEmpty.subscribe({next:function(){i._autoDetect&&i.detectChanges(!0)}}),this._onStableSubscription=r.onStable.subscribe({next:function(){i._isStable=!0,null!==i._promise&&o(function(){i.ngZone.hasPendingMacrotasks||null!==i._promise&&(i._resolve(!0),i._resolve=null,i._promise=null)})}}),this._onErrorSubscription=r.onError.subscribe({next:function(e){throw e}}))}return e.prototype._tick=function(e){this.changeDetectorRef.detectChanges(),e&&this.checkNoChanges()},e.prototype.detectChanges=function(e){var t=this;void 0===e&&(e=!0),null!=this.ngZone?this.ngZone.run(function(){t._tick(e)}):this._tick(e)},e.prototype.checkNoChanges=function(){this.changeDetectorRef.checkNoChanges()},e.prototype.autoDetectChanges=function(e){if(void 0===e&&(e=!0),null==this.ngZone)throw new Error("Cannot call autoDetectChanges when ComponentFixtureNoNgZone is set");this._autoDetect=e,this.detectChanges()},e.prototype.isStable=function(){return this._isStable&&!this.ngZone.hasPendingMacrotasks},e.prototype.whenStable=function(){var e=this;return this.isStable()?Promise.resolve(!1):null!==this._promise?this._promise:(this._promise=new Promise(function(t){e._resolve=t}),this._promise)},e.prototype.destroy=function(){this._isDestroyed||(this.componentRef.destroy(),null!=this._onUnstableSubscription&&(this._onUnstableSubscription.unsubscribe(),this._onUnstableSubscription=null),null!=this._onStableSubscription&&(this._onStableSubscription.unsubscribe(),this._onStableSubscription=null),null!=this._onMicrotaskEmptySubscription&&(this._onMicrotaskEmptySubscription.unsubscribe(),this._onMicrotaskEmptySubscription=null),null!=this._onErrorSubscription&&(this._onErrorSubscription.unsubscribe(),this._onErrorSubscription=null),this._isDestroyed=!0)},e}(),c=Zone.FakeAsyncTestZoneSpec,l=Zone.ProxyZoneSpec,p=null,f=!1,_=function(){function e(){var e=this;this._promise=new Promise(function(t,r){e._resolve=t,e._reject=r})}return e.prototype.done=function(e){this._resolve(e)},e.prototype.fail=function(e,t){this._reject(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),e}(),w=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},C=function(e){function t(t){var r=e.call(this,t);this._nativeError=r}return w(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return this._nativeError.message},set:function(e){this._nativeError.message=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(e){this._nativeError.stack=e},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._nativeError.toString()},t}(Error),x=(function(e){function t(t,r){e.call(this,t+" caused by: "+(r instanceof Error?r.message:r)),this.originalError=r}return w(t,e),Object.defineProperty(t.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),t}(C),this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e){function t(){e.apply(this,arguments)}return x(t,e),Object.defineProperty(t.prototype,"injector",{get:function(){throw E()},enumerable:!0,configurable:!0}),t.prototype.overrideModule=function(e,t){throw E()},t.prototype.overrideDirective=function(e,t){throw E()},t.prototype.overrideComponent=function(e,t){throw E()},t.prototype.overridePipe=function(e,t){throw E()},t}(t.Compiler),T=function(){function e(){}return e}(),M=new Object,P=function(){function e(){}return e.prototype.insertRootElement=function(e){},e}(),A=0,k=new t.OpaqueToken("ComponentFixtureAutoDetect"),O=new t.OpaqueToken("ComponentFixtureNoNgZone"),I=function(){function e(){this._instantiated=!1,this._compiler=null,this._moduleRef=null,this._moduleWithComponentFactories=null,this._compilerOptions=[],this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[],this._activeFixtures=[],this.platform=null,this.ngModule=null}return e.initTestEnvironment=function(e,t){var r=D();return r.initTestEnvironment(e,t),r},e.resetTestEnvironment=function(){D().resetTestEnvironment()},e.resetTestingModule=function(){return D().resetTestingModule(),e},e.configureCompiler=function(t){return D().configureCompiler(t),e},e.configureTestingModule=function(t){return D().configureTestingModule(t),e},e.compileComponents=function(){return D().compileComponents()},e.overrideModule=function(t,r){return D().overrideModule(t,r),e},e.overrideComponent=function(t,r){return D().overrideComponent(t,r),e},e.overrideDirective=function(t,r){return D().overrideDirective(t,r),e},e.overridePipe=function(t,r){return D().overridePipe(t,r),e},e.get=function(e,r){return void 0===r&&(r=t.Injector.THROW_IF_NOT_FOUND),D().get(e,r)},e.createComponent=function(e){return D().createComponent(e)},e.prototype.initTestEnvironment=function(e,t){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");this.platform=t,this.ngModule=e},e.prototype.resetTestEnvironment=function(){this.resetTestingModule(),this.platform=null,this.ngModule=null},e.prototype.resetTestingModule=function(){this._compiler=null,this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._moduleRef=null,this._moduleWithComponentFactories=null,this._compilerOptions=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[],this._instantiated=!1,this._activeFixtures.forEach(function(e){return e.destroy()}),this._activeFixtures=[]},e.prototype.configureCompiler=function(e){this._assertNotInstantiated("TestBed.configureCompiler","configure the compiler"),this._compilerOptions.push(e)},e.prototype.configureTestingModule=function(e){this._assertNotInstantiated("TestBed.configureTestingModule","configure the test module"),e.providers&&(t=this._providers).push.apply(t,e.providers),e.declarations&&(r=this._declarations).push.apply(r,e.declarations),e.imports&&(n=this._imports).push.apply(n,e.imports),e.schemas&&(i=this._schemas).push.apply(i,e.schemas);var t,r,n,i},e.prototype.compileComponents=function(){var e=this;if(this._moduleWithComponentFactories||this._instantiated)return Promise.resolve(null);var t=this._createCompilerAndModule();return this._compiler.compileModuleAndAllComponentsAsync(t).then(function(t){e._moduleWithComponentFactories=t})},e.prototype._initIfNeeded=function(){if(!this._instantiated){if(!this._moduleWithComponentFactories)try{var e=this._createCompilerAndModule();this._moduleWithComponentFactories=this._compiler.compileModuleAndAllComponentsSync(e)}catch(t){throw t.compType?new Error("This test module uses the component "+a(t.compType)+' which is using a "templateUrl", but they were never compiled. Please call "TestBed.compileComponents" before your test.'):t}this._moduleRef=this._moduleWithComponentFactories.ngModuleFactory.create(this.platform.injector),this._instantiated=!0}},e.prototype._createCompilerAndModule=function(){var r=this,n=this._providers.concat([{provide:e,useValue:this}]),i=this._declarations,o=[this.ngModule,this._imports],s=this._schemas,a=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{providers:n,declarations:i,imports:o,schemas:s}]}],e.ctorParameters=[],e}(),u=this.platform.injector.get(T);return this._compiler=u.createTestingCompiler(this._compilerOptions.concat([{useDebug:!0}])),this._moduleOverrides.forEach(function(e){return r._compiler.overrideModule(e[0],e[1])}),this._componentOverrides.forEach(function(e){return r._compiler.overrideComponent(e[0],e[1])}),this._directiveOverrides.forEach(function(e){return r._compiler.overrideDirective(e[0],e[1])}),this._pipeOverrides.forEach(function(e){return r._compiler.overridePipe(e[0],e[1])}),a},e.prototype._assertNotInstantiated=function(e,t){if(this._instantiated)throw new Error("Cannot "+t+" when the test module has already been instantiated. "+("Make sure you are not using `inject` before `"+e+"`."))},e.prototype.get=function(r,n){if(void 0===n&&(n=t.Injector.THROW_IF_NOT_FOUND),this._initIfNeeded(),r===e)return this;var i=this._moduleRef.injector.get(r,M);return i===M?this._compiler.injector.get(r,n):i},e.prototype.execute=function(e,t){var r=this;this._initIfNeeded();var n=e.map(function(e){return r.get(e)});return t.apply(void 0,n)},e.prototype.overrideModule=function(e,t){this._assertNotInstantiated("overrideModule","override module metadata"),this._moduleOverrides.push([e,t])},e.prototype.overrideComponent=function(e,t){this._assertNotInstantiated("overrideComponent","override component metadata"),this._componentOverrides.push([e,t])},e.prototype.overrideDirective=function(e,t){this._assertNotInstantiated("overrideDirective","override directive metadata"),this._directiveOverrides.push([e,t])},e.prototype.overridePipe=function(e,t){this._assertNotInstantiated("overridePipe","override pipe metadata"),this._pipeOverrides.push([e,t])},e.prototype.createComponent=function(e){var r=this;this._initIfNeeded();var n=this._moduleWithComponentFactories.componentFactories.find(function(t){return t.componentType===e});if(!n)throw new Error("Cannot create the component "+a(e)+" as it was not imported into the testing module!");var i=this.get(O,!1),o=this.get(k,!1),s=i?null:this.get(t.NgZone,null),c=this.get(P),l="root"+A++;c.insertRootElement(l);var p=function(){var e=n.create(r,[],"#"+l);return new u(e,s,o)},h=s?s.run(p):p();return this._activeFixtures.push(h),h},e}(),N=null,L=function(){function e(e){this._moduleDef=e}return e.prototype._addModule=function(){var e=this._moduleDef();e&&D().configureTestingModule(e)},e.prototype.inject=function(e,t){var r=this;return function(){return r._addModule(),R(e,t)()}},e}(),V="undefined"==typeof window?global:window;V.beforeEach&&V.beforeEach(function(){I.resetTestingModule(),h()});var j="",U=function(){function e(){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._destroyed=!1,this._started=!1,this.parentPlayer=null,this.log=[]}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this.log.push("finish"),this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[],s(this.parentPlayer)||this.destroy())},e.prototype.init=function(){this.log.push("init")},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this.log.push("play")},e.prototype.pause=function(){this.log.push("pause")},e.prototype.restart=function(){this.log.push("restart")},e.prototype.finish=function(){this._onFinish()},e.prototype.reset=function(){this.log.push("reset")},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.finish(),this.log.push("destroy"))},e.prototype.setPosition=function(e){},e.prototype.getPosition=function(){return 0},e}(),B={TestingCompiler:b,TestingCompilerFactory:T,MockAnimationPlayer:U};e.async=n,e.ComponentFixture=u,e.resetFakeAsyncZone=h,e.fakeAsync=v,e.tick=m,e.discardPeriodicTasks=y,e.flushMicrotasks=g,e.TestComponentRenderer=P,e.ComponentFixtureAutoDetect=k,e.ComponentFixtureNoNgZone=O,e.TestBed=I,e.getTestBed=D,e.inject=R,e.InjectSetupWrapper=L,e.withModule=F,e.__core_private_testing_placeholder__=j,e.__core_private_testing__=B});