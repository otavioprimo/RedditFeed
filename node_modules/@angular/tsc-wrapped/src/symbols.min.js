"use strict";function populateBuiltins(e){["Object","Function","String","Number","Array","Boolean","Map","NaN","Infinity","Math","Date","RegExp","Error","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","JSON","ArrayBuffer","DataView","Int8Array","Uint8Array","Uint8ClampedArray","Uint16Array","Int16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){return e.set(t,{__symbolic:"reference",name:t})})}var ts=require("typescript"),Symbols=function(){function e(e){this.sourceFile=e}return e.prototype.resolve=function(e){return this.symbols.get(e)},e.prototype.define=function(e,t){this.symbols.set(e,t)},e.prototype.has=function(e){return this.symbols.has(e)},Object.defineProperty(e.prototype,"symbols",{get:function(){var e=this._symbols;return e||(e=this._symbols=new Map,populateBuiltins(e),this.buildImports()),e},enumerable:!0,configurable:!0}),e.prototype.buildImports=function(){var e=this,t=this._symbols,r=function(e){return e.replace(/^['"]|['"]$/g,"")},n=function(i){switch(i.kind){case ts.SyntaxKind.ImportEqualsDeclaration:var o=i;if(o.moduleReference.kind===ts.SyntaxKind.ExternalModuleReference){var s=o.moduleReference;s.expression.parent||(s.expression.parent=s,s.parent=e.sourceFile);var a=r(s.expression.getText());t.set(o.name.text,{__symbolic:"reference",module:a})}else t.set(o.name.text,{__symbolic:"error",message:"Unsupported import syntax"});break;case ts.SyntaxKind.ImportDeclaration:var u=i;if(!u.importClause)break;u.moduleSpecifier.parent||(u.moduleSpecifier.parent=u,u.parent=e.sourceFile);var c=r(u.moduleSpecifier.getText());u.importClause.name&&t.set(u.importClause.name.text,{__symbolic:"reference",module:c,"default":!0});var l=u.importClause.namedBindings;if(l)switch(l.kind){case ts.SyntaxKind.NamedImports:for(var p=0,f=l.elements;p<f.length;p++){var h=f[p];t.set(h.name.text,{__symbolic:"reference",module:c,name:h.propertyName?h.propertyName.text:h.name.text})}break;case ts.SyntaxKind.NamespaceImport:t.set(l.name.text,{__symbolic:"reference",module:c})}}ts.forEachChild(i,n)};this.sourceFile&&ts.forEachChild(this.sourceFile,n)},e}();exports.Symbols=Symbols;