"use strict";function expectNoDiagnostics(e){for(var t=0,r=e;t<r.length;t++){var n=r[t],i=ts.flattenDiagnosticMessageText(n.messageText,"\n"),o=n.file.getLineAndCharacterOfPosition(n.start),s=o.line,a=o.character;console.log(n.file.fileName+" ("+(s+1)+","+(a+1)+"): "+i)}expect(e.length).toBe(0)}function expectValidSources(e,t){expectNoDiagnostics(e.getCompilerOptionsDiagnostics());for(var r=0,n=t.getSourceFiles();r<n.length;r++){var i=n[r];expectNoDiagnostics(e.getSyntacticDiagnostics(i.fileName)),expectNoDiagnostics(e.getSemanticDiagnostics(i.fileName))}}function allChildren(e,t){return ts.forEachChild(e,function(r){var n=t(e);return n?n:allChildren(r,t)})}function findClass(e,t){return ts.forEachChild(e,function(e){return isClass(e)&&isNamed(e.name,t)?e:void 0})}function findVar(e,t){return allChildren(e,function(e){return isVar(e)&&isNamed(e.name,t)?e:void 0})}function isClass(e){return e.kind===ts.SyntaxKind.ClassDeclaration}function isNamed(e,t){return e.kind===ts.SyntaxKind.Identifier&&e.text===t}function isVar(e){return e.kind===ts.SyntaxKind.VariableDeclaration}var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},fs=require("fs"),ts=require("typescript"),Host=function(){function e(e,t){this.directory=e,this.scripts=t}return e.prototype.getCompilationSettings=function(){return{experimentalDecorators:!0,module:ts.ModuleKind.CommonJS,target:ts.ScriptTarget.ES5}},e.prototype.getScriptFileNames=function(){return this.scripts},e.prototype.getScriptVersion=function(e){return"1"},e.prototype.getScriptSnapshot=function(e){var t=this.getFileContent(e);return t?ts.ScriptSnapshot.fromString(t):void 0},e.prototype.getCurrentDirectory=function(){return"/"},e.prototype.getDefaultLibFileName=function(e){return"lib.d.ts"},e.prototype.getFileContent=function(e){var t=e.split("/");if("lib.d.ts"===t[t.length-1])return fs.readFileSync(ts.getDefaultLibFilePath(this.getCompilationSettings()),"utf8");var r=this.directory;t.length&&""===t[0]&&t.shift();for(var n=0,i=t;n<i.length;n++){var o=i[n];if(!r||"string"==typeof r)return void 0;r=r[o]}return"string"==typeof r?r:void 0},e}();exports.Host=Host;var MockNode=function(){function e(e,t,r,n){void 0===e&&(e=ts.SyntaxKind.Identifier),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.kind=e,this.flags=t,this.pos=r,this.end=n}return e.prototype.getSourceFile=function(){return null},e.prototype.getChildCount=function(e){return 0},e.prototype.getChildAt=function(e,t){return null},e.prototype.getChildren=function(e){return[]},e.prototype.getStart=function(e){return 0},e.prototype.getFullStart=function(){return 0},e.prototype.getEnd=function(){return 0},e.prototype.getWidth=function(e){return 0},e.prototype.getFullWidth=function(){return 0},e.prototype.getLeadingTriviaWidth=function(e){return 0},e.prototype.getFullText=function(e){return""},e.prototype.getText=function(e){return""},e.prototype.getFirstToken=function(e){return null},e.prototype.getLastToken=function(e){return null},e}();exports.MockNode=MockNode;var MockIdentifier=function(e){function t(t,r,n,i,o){void 0===r&&(r=ts.SyntaxKind.Identifier),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),e.call(this,r,n,i,o),this.name=t,this.text=t}return __extends(t,e),t}(MockNode);exports.MockIdentifier=MockIdentifier;var MockVariableDeclaration=function(e){function t(t,r,n,i,o){void 0===r&&(r=ts.SyntaxKind.VariableDeclaration),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),e.call(this,r,n,i,o),this.name=t}return __extends(t,e),t.of=function(e){return new t(new MockIdentifier(e))},t}(MockNode);exports.MockVariableDeclaration=MockVariableDeclaration;var MockSymbol=function(){function e(e,t,r){void 0===t&&(t=MockVariableDeclaration.of(e)),void 0===r&&(r=0),this.name=e,this.node=t,this.flags=r}return e.prototype.getFlags=function(){return this.flags},e.prototype.getName=function(){return this.name},e.prototype.getDeclarations=function(){return[this.node]},e.prototype.getDocumentationComment=function(){return[]},e.of=function(t){return new e(t)},e}();exports.MockSymbol=MockSymbol,exports.expectNoDiagnostics=expectNoDiagnostics,exports.expectValidSources=expectValidSources,exports.allChildren=allChildren,exports.findClass=findClass,exports.findVar=findVar,exports.isClass=isClass,exports.isNamed=isNamed,exports.isVar=isVar;