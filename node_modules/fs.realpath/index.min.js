function newError(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function realpath(t,e,n){return ok?origRealpath(t,e,n):("function"==typeof e&&(n=e,e=null),void origRealpath(t,e,function(r,i){newError(r)?old.realpath(t,e,n):n(r,i)}))}function realpathSync(t,e){if(ok)return origRealpathSync(t,e);try{return origRealpathSync(t,e)}catch(n){if(newError(n))return old.realpathSync(t,e);throw n}}function monkeypatch(){fs.realpath=realpath,fs.realpathSync=realpathSync}function unmonkeypatch(){fs.realpath=origRealpath,fs.realpathSync=origRealpathSync}module.exports=realpath,realpath.realpath=realpath,realpath.sync=realpathSync,realpath.realpathSync=realpathSync,realpath.monkeypatch=monkeypatch,realpath.unmonkeypatch=unmonkeypatch;var fs=require("fs"),origRealpath=fs.realpath,origRealpathSync=fs.realpathSync,version=process.version,ok=/^v[0-5]\./.test(version),old=require("./old.js");