"use strict";function format(t){if(!t||"object"!=typeof t)throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!typeRegExp.test(n))throw new TypeError("invalid type");var r=n;if(e&&"object"==typeof e)for(var i,o=Object.keys(e).sort(),s=0;s<o.length;s++){if(i=o[s],!tokenRegExp.test(i))throw new TypeError("invalid parameter name");r+="; "+i+"="+qstring(e[i])}return r}function parse(t){if(!t)throw new TypeError("argument string is required");if("object"==typeof t&&(t=getcontenttype(t),"string"!=typeof t))throw new TypeError("content-type header is missing from object");if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),n=-1!==e?t.substr(0,e).trim():t.trim();if(!typeRegExp.test(n))throw new TypeError("invalid media type");var r,i,s,o=new ContentType(n.toLowerCase());for(paramRegExp.lastIndex=e;i=paramRegExp.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,r=i[1].toLowerCase(),s=i[2],'"'===s[0]&&(s=s.substr(1,s.length-2).replace(qescRegExp,"$1")),o.parameters[r]=s}if(-1!==e&&e!==t.length)throw new TypeError("invalid parameter format");return o}function getcontenttype(t){return"function"==typeof t.getHeader?t.getHeader("content-type"):"object"==typeof t.headers?t.headers&&t.headers["content-type"]:void 0}function qstring(t){var e=String(t);if(tokenRegExp.test(e))return e;if(e.length>0&&!textRegExp.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(quoteRegExp,"\\$1")+'"'}function ContentType(t){this.parameters=Object.create(null),this.type=t}var paramRegExp=/; *([!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+) */g,textRegExp=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,tokenRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/,qescRegExp=/\\([\u000b\u0020-\u00ff])/g,quoteRegExp=/([\\"])/g,typeRegExp=/^[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+\/[!#$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+$/;exports.format=format,exports.parse=parse;