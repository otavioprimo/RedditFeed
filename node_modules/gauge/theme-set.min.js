"use strict";var objectAssign=require("object-assign");module.exports=function(){return ThemeSetProto.newThemeSet()};var ThemeSetProto={};ThemeSetProto.baseTheme=require("./base-theme.js"),ThemeSetProto.newTheme=function(t,e){return e||(e=t,t=this.baseTheme),objectAssign({},t,e)},ThemeSetProto.getThemeNames=function(){return Object.keys(this.themes)},ThemeSetProto.addTheme=function(t,e,n){this.themes[t]=this.newTheme(e,n)},ThemeSetProto.addToAllThemes=function(t){var e=this.themes;Object.keys(e).forEach(function(n){objectAssign(e[n],t)}),objectAssign(this.baseTheme,t)},ThemeSetProto.getTheme=function(t){if(!this.themes[t])throw this.newMissingThemeError(t);return this.themes[t]},ThemeSetProto.setDefault=function(t,e){null==e&&(e=t,t={});var n=null==t.platform?"fallback":t.platform,r=!!t.hasUnicode,i=!!t.hasColor;this.defaults[n]||(this.defaults[n]={"true":{},"false":{}}),this.defaults[n][r][i]=e},ThemeSetProto.getDefault=function(t){t||(t={});var e=t.platform||process.platform,n=this.defaults[e]||this.defaults.fallback,r=!!t.hasUnicode,i=!!t.hasColor;if(!n)throw this.newMissingDefaultThemeError(e,r,i);if(!n[r][i])if(r&&i&&n[!r][i])r=!1;else if(r&&i&&n[r][!i])i=!1;else if(r&&i&&n[!r][!i])r=!1,i=!1;else if(r&&!i&&n[!r][i])r=!1;else if(!r&&i&&n[r][!i])i=!1;else if(n===this.defaults.fallback)throw this.newMissingDefaultThemeError(e,r,i);return n[r][i]?this.getTheme(n[r][i]):this.getDefault(objectAssign({},t,{platform:"fallback"}))},ThemeSetProto.newMissingThemeError=function t(e){var n=new Error('Could not find a gauge theme named "'+e+'"');return Error.captureStackTrace.call(n,t),n.theme=e,n.code="EMISSINGTHEME",n},ThemeSetProto.newMissingDefaultThemeError=function e(t,n,r){var i=new Error("Could not find a gauge theme for your platform/unicode/color use combo:\n    platform = "+t+"\n    hasUnicode = "+n+"\n    hasColor = "+r);return Error.captureStackTrace.call(i,e),i.platform=t,i.hasUnicode=n,i.hasColor=r,i.code="EMISSINGTHEME",i},ThemeSetProto.newThemeSet=function(){var t=function(e){return t.getDefault(e)};return objectAssign(t,ThemeSetProto,{themes:objectAssign({},this.themes),baseTheme:objectAssign({},this.baseTheme),defaults:JSON.parse(JSON.stringify(this.defaults||{}))})};