function wrapIterator(e){var t=this;return function(r,n,i){var o,a=async(wrapIteratorCallback.call(t,i,n));return t.jobs[n]=a,o=2==e.length?e(r,a):e(r,n,a)}}function wrapCallback(e){var t=this,r=function(r,n){return finisher.call(t,r,n,e)};return r}function wrapIteratorCallback(e,t){var r=this;return function(n,i){return t in r.jobs?(delete r.jobs[t],streamer.call(r,n,{key:t,value:i},e)):void e(n,i)}}function streamer(e,t,r){return e&&!this.error?(this.error=e,this.pause(),this.emit("error",e),void r(e,t&&t.value)):(this.push(t),void r(e,t&&t.value))}function finisher(e,t,r){e||this.push(null),r(e,t)}var async=require("./async.js");module.exports={iterator:wrapIterator,callback:wrapCallback};