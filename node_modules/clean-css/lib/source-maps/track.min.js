function trackPrefix(e,t,r){if(!r&&-1==e.indexOf("\n"))return 0===e.indexOf(escapePrefix)?e:void(t.column+=e.length);for(var n=0,i=e.split("\n"),a=i.length,o=0;;){if(n==a-1)break;var s=i[n];if(/\S/.test(s))break;o+=s.length+1,n++}return t.line+=n,t.column=n>0?0:t.column,t.column+=/^(\s)*/.exec(i[n])[0].length,e.substring(o).trimLeft()}function sourceFor(e,t,r){var n=e.source||t.source;return n&&r.resolvePath?r.resolvePath(t.source,n):n}function snapshot(e,t,r){var n={line:t.line,column:t.column,source:t.source},i=null,a=t.sourceMapTracker.isTracking(n.source)?t.sourceMapTracker.originalPositionFor(n,e,r||0):{};if(n.line=a.line||n.line,n.column=a.column||n.column,n.source=a.sourceResolved?a.source:sourceFor(a,n,t),t.sourceMapInlineSources){var o=t.sourceMapTracker.sourcesContentFor(t.source);i=o&&o[n.source]?o:t.sourceReader.sourceAt(t.source)}return i?[n.line,n.column,n.source,i]:[n.line,n.column,n.source]}function trackSuffix(e,t){for(var r=e.split("\n"),n=0,i=r.length;i>n;n++){var a=r[n],o=0;for(n>0&&(t.line++,t.column=0);;){var s=a.indexOf(escapePrefix,o);if(-1==s){t.column+=a.substring(o).length;break}t.column+=s-o,o+=s-o;var u=a.substring(s,a.indexOf("__",s+1)+2),l=u.substring(u.indexOf("(")+1,u.indexOf(")")).split(",");t.line+=~~l[0],t.column=(0===~~l[0]?t.column:0)+~~l[1],o+=u.length}}}function track(e,t,r,n){var i=trackPrefix(e,t,r),a=r?snapshot(i,t,n):[];return i&&trackSuffix(i,t),a}var escapePrefix="__ESCAPED_";module.exports=track;