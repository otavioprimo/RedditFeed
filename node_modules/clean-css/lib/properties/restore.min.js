function isInheritOnly(e){for(var t=0,r=e.length;r>t;t++){var n=e[t][0];if("inherit"!=n&&n!=MULTIPLEX_SEPARATOR&&n!=SIZE_POSITION_SEPARATOR)return!1}return!0}function background(e,t,r){function s(e){Array.prototype.unshift.apply(i,e.value)}function u(e){var r=t[e.name];return r.doubleValues?1==r.defaultValue.length?e.value[0][0]==r.defaultValue[0]&&(e.value[1]?e.value[1][0]==r.defaultValue[0]:!0):e.value[0][0]==r.defaultValue[0]&&(e.value[1]?e.value[1][0]:e.value[0][0])==r.defaultValue[1]:e.value[0][0]==r.defaultValue}for(var a,o,n=e.components,i=[],l=n.length-1;l>=0;l--){var c=n[l],f=u(c);if("background-clip"==c.name){var p=n[l-1],h=u(p);a=c.value[0][0]==p.value[0][0],o=!a&&(h&&!f||!h&&!f||!h&&f&&c.value[0][0]!=p.value[0][0]),a?s(p):o&&(s(c),s(p)),l--}else if("background-size"==c.name){var d=n[l-1],v=u(d);a=!v&&f,o=!a&&(v&&!f||!v&&!f),a?s(d):o?(s(c),i.unshift([SIZE_POSITION_SEPARATOR]),s(d)):1==d.value.length&&s(d),l--}else{if(f||t[c.name].multiplexLastOnly&&!r)continue;s(c)}}return 0===i.length&&1==e.value.length&&"0"==e.value[0][0]&&i.push(e.value[0]),0===i.length&&i.push([t[e.name].defaultValue]),isInheritOnly(i)?[i[0]]:i}function borderRadius(e,t){if(e.multiplex){for(var r=shallowClone(e),n=shallowClone(e),i=0;4>i;i++){var a=e.components[i],o=shallowClone(e);o.value=[a.value[0]],r.components.push(o);var s=shallowClone(e);s.value=[a.value[1]||a.value[0]],n.components.push(s)}var u=fourValues(r,t),l=fourValues(n,t);return u.length!=l.length||u[0][0]!=l[0][0]||(u.length>1?u[1][0]!=l[1][0]:0)||(u.length>2?u[2][0]!=l[2][0]:0)||(u.length>3?u[3][0]!=l[3][0]:0)?u.concat([["/"]]).concat(l):u}return fourValues(e,t)}function fourValues(e){var t=e.components,r=t[0].value[0],n=t[1].value[0],i=t[2].value[0],a=t[3].value[0];return r[0]==n[0]&&r[0]==i[0]&&r[0]==a[0]?[r]:r[0]==i[0]&&n[0]==a[0]?[r,n]:n[0]==a[0]?[r,n,i]:[r,n,i,a]}function multiplex(e){return function(t,r){if(!t.multiplex)return e(t,r,!0);var o,s,n=0,i=[],a={};for(o=0,s=t.components[0].value.length;s>o;o++)t.components[0].value[o][0]==MULTIPLEX_SEPARATOR&&n++;for(o=0;n>=o;o++){for(var u=shallowClone(t),l=0,c=t.components.length;c>l;l++){var f=t.components[l],p=shallowClone(f);u.components.push(p);for(var h=a[p.name]||0,d=f.value.length;d>h;h++){if(f.value[h][0]==MULTIPLEX_SEPARATOR){a[p.name]=h+1;break}p.value.push(f.value[h])}}var v=o==n,m=e(u,r,v);Array.prototype.push.apply(i,m),n>o&&i.push([","])}return i}}function withoutDefaults(e,t){for(var r=e.components,n=[],i=r.length-1;i>=0;i--){var a=r[i],o=t[a.name];a.value[0][0]!=o.defaultValue&&n.unshift(a.value[0])}return 0===n.length&&n.push([t[e.name].defaultValue]),isInheritOnly(n)?[n[0]]:n}var shallowClone=require("./clone").shallow,MULTIPLEX_SEPARATOR=",",SIZE_POSITION_SEPARATOR="/";module.exports={background:background,borderRadius:borderRadius,fourValues:fourValues,multiplex:multiplex,withoutDefaults:withoutDefaults};