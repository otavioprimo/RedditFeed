"use strict";var util=require("util");module.exports=function(e,t,r){function i(){e.removeListener(t,s),r(new Error("Timeout listening for "+t))}function s(){o=Array.prototype.slice.call(arguments),clearTimeout(n),n=setTimeout(a,10),e.once(t,u)}function a(){e.removeListener(t,u);var n=[null].concat(o);r.apply(null,n)}function u(){var e=Array.prototype.slice.call(arguments);clearTimeout(n),r(new Error("Got too many results, first "+util.inspect(o)+" and then "+util.inspect(e)))}var n=setTimeout(i,10);e.once(t,s);var o=[]};