"use strict";function delegateChange(t){return function(e,n,i){t.emit("change",e,n,t)}}var util=require("util"),stream=require("readable-stream"),delegate=require("delegates"),Tracker=require("./tracker.js"),TrackerStream=module.exports=function(t,e,n){stream.Transform.call(this,n),this.tracker=new Tracker(t,e),this.name=t,this.id=this.tracker.id,this.tracker.on("change",delegateChange(this))};util.inherits(TrackerStream,stream.Transform),TrackerStream.prototype._transform=function(t,e,n){this.tracker.completeWork(t.length?t.length:1),this.push(t),n()},TrackerStream.prototype._flush=function(t){this.tracker.finish(),t()},delegate(TrackerStream.prototype,"tracker").method("completed").method("addWork");