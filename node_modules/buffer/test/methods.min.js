process.env.OBJECT_IMPL&&(global.TYPED_ARRAY_SUPPORT=!1);var B=require("../").Buffer,test=require("tape");test("buffer.toJSON",function(e){var t=[1,2,3,4];e.deepEqual(new B(t).toJSON(),{type:"Buffer",data:[1,2,3,4]}),e.end()}),test("buffer.copy",function(e){for(var t=new B(26),r=new B(26),n=0;26>n;n++)t[n]=n+97,r[n]=33;t.copy(r,8,16,20),e.equal(r.toString("ascii",0,25),"!!!!!!!!qrst!!!!!!!!!!!!!"),e.end()}),test("test offset returns are correct",function(e){var t=new B(16);e.equal(4,t.writeUInt32LE(0,0)),e.equal(6,t.writeUInt16LE(0,4)),e.equal(7,t.writeUInt8(0,6)),e.equal(8,t.writeInt8(0,7)),e.equal(16,t.writeDoubleLE(0,8)),e.end()}),test("concat() a varying number of buffers",function(e){for(var t=[],r=[new B("asdf")],n=[],i=0;10>i;i++)n.push(new B("asdf"));var o=B.concat(t),a=B.concat(r),s=B.concat(n),u=B.concat(n,40);e.equal(o.length,0),e.equal(a.toString(),"asdf"),e.deepEqual(a,r[0]),e.equal(s.toString(),new Array(11).join("asdf")),e.equal(u.toString(),new Array(11).join("asdf")),e.end()}),test("fill",function(e){var t=new B(10);t.fill(2),e.equal(t.toString("hex"),"02020202020202020202"),e.end()}),test("fill (string)",function(e){var t=new B(10);t.fill("abc"),e.equal(t.toString(),"abcabcabca"),t.fill("է"),e.equal(t.toString(),"էէէէէ"),e.end()}),test("copy() empty buffer with sourceEnd=0",function(e){var t=new B([42]),r=new B([43]);t.copy(r,0,0,0),e.equal(r.readUInt8(0),43),e.end()}),test("copy() after slice()",function(e){for(var t=new B(200),r=new B(200),n=new B(200),i=0;200>i;i++)t[i]=i,r[i]=0;t.slice(2).copy(r),t.copy(n,0,2),e.deepEqual(r,n),e.end()}),test("copy() ascending",function(e){var t=new B("abcdefghij");t.copy(t,0,3,10),e.equal(t.toString(),"defghijhij"),e.end()}),test("copy() descending",function(e){var t=new B("abcdefghij");t.copy(t,3,0,7),e.equal(t.toString(),"abcabcdefg"),e.end()}),test("buffer.slice sets indexes",function(e){e.equal(new B("hallo").slice(0,5).toString(),"hallo"),e.end()}),test("buffer.slice out of range",function(e){e.plan(2),e.equal(new B("hallo").slice(0,10).toString(),"hallo"),e.equal(new B("hallo").slice(10,2).toString(),""),e.end()});