!function(){function n(e){var r=!1;return function(){if(r)throw new Error("Callback was already called.");r=!0,e.apply(t,arguments)}}var t,r,e={};t=this,null!=t&&(r=t.async),e.noConflict=function(){return t.async=r,e};var i=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r+=1)t(e[r],r,e)},o=function(e,t){if(e.map)return e.map(t);var r=[];return i(e,function(e,n,i){r.push(t(e,n,i))}),r},a=function(e,t,r){return e.reduce?e.reduce(t,r):(i(e,function(e,n,i){r=t(r,e,n,i)}),r)},s=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};"undefined"!=typeof process&&process.nextTick?(e.nextTick=process.nextTick,"undefined"!=typeof setImmediate?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick):"function"==typeof setImmediate?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick),e.each=function(e,t,r){if(r=r||function(){},!e.length)return r();var o=0;i(e,function(i){t(i,n(function(t){t?(r(t),r=function(){}):(o+=1,o>=e.length&&r(null))}))})},e.forEach=e.each,e.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r(null):i())})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,t,r,n){var i=u(t);i.apply(null,[e,r,n])},e.forEachLimit=e.eachLimit;var u=function(e){return function(t,r,n){if(n=n||function(){},!t.length||0>=e)return n();var i=0,o=0,a=0;!function s(){if(i>=t.length)return n();for(;e>a&&o<t.length;)o+=1,a+=1,r(t[o-1],function(e){e?(n(e),n=function(){}):(i+=1,a-=1,i>=t.length?n():s())})}()}},l=function(t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[e.each].concat(r))}},c=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[u(e)].concat(r))}},f=function(t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[e.eachSeries].concat(r))}},p=function(e,t,r,n){var i=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r,n){i[e.index]=n,t(r)})},function(e){n(e,i)})};e.map=l(p),e.mapSeries=f(p),e.mapLimit=function(e,t,r,n){return h(t)(e,r,n)};var h=function(e){return c(e,p)};e.reduce=function(t,r,n,i){e.eachSeries(t,function(e,t){n(r,e,function(e,n){r=n,t(e)})},function(e){i(e,r)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,r,n,i){var a=o(t,function(e){return e}).reverse();e.reduce(a,r,n,i)},e.foldr=e.reduceRight;var d=function(e,t,r,n){var i=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&i.push(e),t()})},function(e){n(o(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=l(d),e.filterSeries=f(d),e.select=e.filter,e.selectSeries=e.filterSeries;var v=function(e,t,r,n){var i=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||i.push(e),t()})},function(e){n(o(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=l(v),e.rejectSeries=f(v);var m=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(e){n()})};e.detect=l(m),e.detectSeries=f(m),e.some=function(t,r,n){e.each(t,function(e,t){r(e,function(e){e&&(n(!0),n=function(){}),t()})},function(e){n(!1)})},e.any=e.some,e.every=function(t,r,n){e.each(t,function(e,t){r(e,function(e){e||(n(!1),n=function(){}),t()})},function(e){n(!0)})},e.all=e.every,e.sortBy=function(t,r,n){e.map(t,function(e,t){r(e,function(r,n){r?t(r):t(null,{value:e,criteria:n})})},function(e,t){if(e)return n(e);var r=function(e,t){var r=e.criteria,n=t.criteria;return n>r?-1:r>n?1:0};n(null,o(t.sort(r),function(e){return e.value}))})},e.auto=function(t,r){r=r||function(){};var n=s(t);if(!n.length)return r(null);var o={},u=[],l=function(e){u.unshift(e)},c=function(e){for(var t=0;t<u.length;t+=1)if(u[t]===e)return void u.splice(t,1)},f=function(){i(u.slice(0),function(e){e()})};l(function(){s(o).length===n.length&&(r(null,o),r=function(){})}),i(n,function(n){var u=t[n]instanceof Function?[t[n]]:t[n],p=function(t){var a=Array.prototype.slice.call(arguments,1);if(a.length<=1&&(a=a[0]),t){var u={};i(s(o),function(e){u[e]=o[e]}),u[n]=a,r(t,u),r=function(){}}else o[n]=a,e.setImmediate(f)},h=u.slice(0,Math.abs(u.length-1))||[],d=function(){return a(h,function(e,t){return e&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(n)};if(d())u[u.length-1](p,o);else{var v=function(){d()&&(c(v),u[u.length-1](p,o))};l(v)}})},e.waterfall=function(t,r){if(r=r||function(){},t.constructor!==Array){var n=new Error("First argument to waterfall must be an array of functions");return r(n)}if(!t.length)return r();var i=function(t){return function(n){if(n)r.apply(null,arguments),r=function(){};else{var o=Array.prototype.slice.call(arguments,1),a=t.next();a?o.push(i(a)):o.push(r),e.setImmediate(function(){t.apply(null,o)})}}};i(e.iterator(t))()};var g=function(e,t,r){if(r=r||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.each(s(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(e){r(e,n)})}};e.parallel=function(t,r){g({map:e.map,each:e.each},t,r)},e.parallelLimit=function(e,t,r){g({map:h(t),each:u(t)},e,r)},e.series=function(t,r){if(r=r||function(){},t.constructor===Array)e.mapSeries(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.eachSeries(s(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(e){r(e,n)})}},e.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var y=function(e,t,r,n){var i=[];e(t,function(e,t){r(e,function(e,r){i=i.concat(r||[]),t(e)})},function(e){n(e,i)})};e.concat=l(y),e.concatSeries=f(y),e.whilst=function(t,r,n){t()?r(function(i){return i?n(i):void e.whilst(t,r,n)}):n()},e.doWhilst=function(t,r,n){t(function(i){return i?n(i):void(r()?e.doWhilst(t,r,n):n())})},e.until=function(t,r,n){t()?n():r(function(i){return i?n(i):void e.until(t,r,n)})},e.doUntil=function(t,r,n){t(function(i){return i?n(i):void(r()?n():e.doUntil(t,r,n))})},e.queue=function(t,r){function o(t,n,o,a){n.constructor!==Array&&(n=[n]),i(n,function(n){var i={data:n,callback:"function"==typeof a?a:null};o?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===r&&t.saturated(),e.setImmediate(t.process)})}void 0===r&&(r=1);var a=0,s={tasks:[],concurrency:r,saturated:null,empty:null,drain:null,push:function(e,t){o(s,e,!1,t)},unshift:function(e,t){o(s,e,!0,t)},process:function(){if(a<s.concurrency&&s.tasks.length){var e=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),a+=1;var r=function(){a-=1,e.callback&&e.callback.apply(e,arguments),s.drain&&s.tasks.length+a===0&&s.drain(),s.process()},i=n(r);t(e.data,i)}},length:function(){return s.tasks.length},running:function(){return a}};return s},e.cargo=function(t,r){var n=!1,a=[],s={tasks:a,payload:r,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),i(t,function(e){a.push({data:e,callback:"function"==typeof n?n:null}),s.saturated&&a.length===r&&s.saturated()}),e.setImmediate(s.process)},process:function u(){if(!n){if(0===a.length)return void(s.drain&&s.drain());var e="number"==typeof r?a.splice(0,r):a.splice(0),l=o(e,function(e){return e.data});s.empty&&s.empty(),n=!0,t(l,function(){n=!1;var t=arguments;i(e,function(e){e.callback&&e.callback.apply(null,t)}),u()})}},length:function(){return a.length},running:function(){return n}};return s};var _=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&i(r,function(t){console[e](t)}))}]))}};e.log=_("log"),e.dir=_("dir"),e.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in r?o.apply(null,r[a]):a in n?n[a].push(o):(n[a]=[o],e.apply(null,i.concat([function(){r[a]=arguments;var e=n[a];delete n[a];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=e,i},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(t,r,n){for(var i=[],o=0;t>o;o++)i.push(o);return e.map(i,r,n)},e.timesSeries=function(t,r,n){for(var i=[],o=0;t>o;o++)i.push(o);return e.mapSeries(i,r,n)},e.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();e.reduce(t,n,function(e,t,n){t.apply(r,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,t){i.apply(r,[e].concat(t))})}};var b=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return e(t,function(e,t){e.apply(r,n.concat([t]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};e.applyEach=l(b),e.applyEachSeries=f(b),e.forever=function(e,t){function r(n){if(n){if(t)return t(n);throw n}e(r)}r()},"undefined"!=typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.async=e}();