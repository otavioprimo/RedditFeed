function ModulesInHierachicDirectoriesPlugin(e,t,r){this.source=e,this.directories=[].concat(t),this.target=r}var createInnerCallback=require("./createInnerCallback"),forEachBail=require("./forEachBail"),getPaths=require("./getPaths"),assign=require("object-assign");module.exports=ModulesInHierachicDirectoriesPlugin,ModulesInHierachicDirectoriesPlugin.prototype.apply=function(e){var t=this.directories,r=this.target;e.plugin(this.source,function(n,i){var a=this.fileSystem,o=i,s=getPaths(n.path).paths.map(function(e){return t.map(function(t){return this.join(e,t)},this)},this).reduce(function(e,t){return e.push.apply(e,t),e},[]);forEachBail(s,function(t,i){a.stat(t,function(a,s){if(!a&&s&&s.isDirectory()){var u=assign({},n,{path:t,request:"./"+n.request}),l="looking for modules in "+t;return e.doResolve(r,u,l,createInnerCallback(i,o))}return o.log&&o.log(t+" doesn't exist or is not a directory"),o.missing&&o.missing.push(t),i()})},i)})};