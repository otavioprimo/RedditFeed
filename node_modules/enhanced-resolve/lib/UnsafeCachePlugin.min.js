function UnsafeCachePlugin(e,t,r,n){this.source=e,this.filterPredicate=t,this.cache=r||{},this.target=n}function getCacheId(e){return JSON.stringify({context:e.context,path:e.path,query:e.query,request:e.request})}var createInnerCallback=require("./createInnerCallback"),assign=require("object-assign");module.exports=UnsafeCachePlugin,UnsafeCachePlugin.prototype.apply=function(e){var t=this.filterPredicate,r=this.cache,n=this.target;e.plugin(this.source,function(i,a){if(!t(i))return a();var o=getCacheId(i),s=r[o];return s?a(null,s):void e.doResolve(n,i,null,createInnerCallback(function(e,t){return e?a(e):t?a(null,r[o]=t):void a()},a))})};