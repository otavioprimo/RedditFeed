"use strict";function parse(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var n={},r=e||{},i=t.split(pairSplitRegExp),o=r.decode||decode,s=0;s<i.length;s++){var a=i[s],c=a.indexOf("=");if(!(0>c)){var l=a.substr(0,c).trim(),u=a.substr(++c,a.length).trim();'"'==u[0]&&(u=u.slice(1,-1)),void 0==n[l]&&(n[l]=tryDecode(u,o))}}return n}function serialize(t,e,n){var r=n||{},i=r.encode||encode;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(t))throw new TypeError("argument name is invalid");var o=i(e);if(o&&!fieldContentRegExp.test(o))throw new TypeError("argument val is invalid");var s=t+"="+o;if(null!=r.maxAge){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(a)}if(r.domain){if(!fieldContentRegExp.test(r.domain))throw new TypeError("option domain is invalid");s+="; Domain="+r.domain}if(r.path){if(!fieldContentRegExp.test(r.path))throw new TypeError("option path is invalid");s+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite){var c="string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return s}function tryDecode(t,e){try{return e(t)}catch(n){return t}}exports.parse=parse,exports.serialize=serialize;var decode=decodeURIComponent,encode=encodeURIComponent,pairSplitRegExp=/; */,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;