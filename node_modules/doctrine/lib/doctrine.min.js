!function(){"use strict";function o(e,t,r){return e.slice(t,r)}function s(e){var r,t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function u(e){return e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e}function l(e){return"param"===e||"argument"===e||"arg"===e}function c(e){return"return"===e||"returns"===e}function f(e){return"property"===e||"prop"===e}function p(e){return l(e)||f(e)||"alias"===e||"this"===e||"mixes"===e||"requires"===e}function h(e){return p(e)||"const"===e||"constant"===e}function d(e){return f(e)||l(e)}function v(e){return l(e)||c(e)||"define"===e||"enum"===e||"implements"===e||"this"===e||"type"===e||"typedef"===e||f(e)}function m(e){return v(e)||"throws"===e||"const"===e||"constant"===e||"namespace"===e||"member"===e||"var"===e||"module"===e||"constructor"===e||"class"===e||"extends"===e||"augments"===e||"public"===e||"private"===e||"protected"===e}function g(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function y(e){var a,o,s,u,l,t=0,r=1,n=2;for(e=e.replace(/^\/\*\*?/,"").replace(/\*\/$/,""),a=0,o=e.length,s=t,u="";o>a;){switch(l=e.charCodeAt(a),s){case t:i.code.isLineTerminator(l)?u+=String.fromCharCode(l):42===l?s=r:i.code.isWhiteSpace(l)||(u+=String.fromCharCode(l),s=n);break;case r:i.code.isWhiteSpace(l)||(u+=String.fromCharCode(l)),s=i.code.isLineTerminator(l)?t:n;break;case n:u+=String.fromCharCode(l),i.code.isLineTerminator(l)&&(s=t)}a+=1}return u.replace(/\s+$/,"")}var e,t,r,n,i,a;i=require("esutils"),r=require("isarray"),e=require("./typed"),t=require("./utility"),a=function(){var e=Object.prototype.hasOwnProperty;return function(t,r){return e.call(t,r)}}(),function(n){function k(){var e=w.charCodeAt(f);return f+=1,!i.code.isLineTerminator(e)||13===e&&10===w.charCodeAt(f)||(b+=1),String.fromCharCode(e)}function C(){var e="";for(k();_>f&&u(w.charCodeAt(f));)e+=k();return e}function A(){var e,t,r=f;for(t=!1;_>r;){if(e=w.charCodeAt(r),!i.code.isLineTerminator(e)||13===e&&10===w.charCodeAt(r+1)){if(t){if(64===e)break;i.code.isWhiteSpace(e)||(t=!1)}}else t=!0;r+=1}return r}function P(r,n){for(var a,o,s,u=!1;n>f;){if(a=w.charCodeAt(f),!i.code.isWhiteSpace(a)){if(123===a){k();break}u=!0;break}k()}if(u)return null;for(o=1,s="";n>f;)if(a=w.charCodeAt(f),i.code.isLineTerminator(a))k();else{if(125===a){if(o-=1,0===o){k();break}}else 123===a&&(o+=1);s+=k()}return 0!==o?t.throwError("Braces are not balanced"):l(r)?e.parseParamType(s):e.parseType(s)}function T(e){var t;if(!i.code.isIdentifierStart(w.charCodeAt(f)))return null;for(t=k();e>f&&i.code.isIdentifierPart(w.charCodeAt(f));)t+=k();return t}function O(e){for(;e>f&&(i.code.isWhiteSpace(w.charCodeAt(f))||i.code.isLineTerminator(w.charCodeAt(f)));)k()}function q(e,t,r){var a,n="";if(O(e),f>=e)return null;if(t&&91===w.charCodeAt(f)&&(a=!0,n=k()),!i.code.isIdentifierStart(w.charCodeAt(f)))return null;if(n+=T(e),r)for(58!==w.charCodeAt(f)||"module"!==n&&"external"!==n&&"event"!==n||(n+=k(),n+=T(e)),91===w.charCodeAt(f)&&93===w.charCodeAt(f+1)&&(n+=k(),n+=k());46===w.charCodeAt(f)||35===w.charCodeAt(f)||126===w.charCodeAt(f);)n+=k(),n+=T(e);if(a){if(61===w.charCodeAt(f)){n+=k();for(var o=1;e>f;){if(91===w.charCodeAt(f))o++;else if(93===w.charCodeAt(f)&&0===--o)break;n+=k()}}if(f>=e||93!==w.charCodeAt(f))return null;n+=k()}return n}function N(){for(;_>f&&64!==w.charCodeAt(f);)k();return f>=_?!1:(t.assert(64===w.charCodeAt(f)),!0)}function B(e,t){this._options=e,this._title=t,this._tag={title:t,description:null},this._options.lineNumbers&&(this._tag.lineNumber=b),this._last=0,this._extra={}}function R(e){var t,r,n;if(!N())return null;for(t=C(),r=new B(e,t),n=r.parse();f<r._last;)k();return n}function I(e){var r,n,t="";for(n=!0;_>f&&(r=w.charCodeAt(f),!n||64!==r);)i.code.isLineTerminator(r)?n=!0:n&&!i.code.isWhiteSpace(r)&&(n=!1),t+=k();return e?t:g(t)}function M(e,n){var a,o,s,u,l,i=[];if(void 0===n&&(n={}),w="boolean"==typeof n.unwrap&&n.unwrap?y(e):e,n.tags)if(r(n.tags))for(s={},u=0,l=n.tags.length;l>u;u++)"string"==typeof n.tags[u]?s[n.tags[u]]=!0:t.throwError('Invalid "tags" parameter: '+n.tags);else t.throwError('Invalid "tags" parameter: '+n.tags);for(_=w.length,f=0,b=0,x=n.recoverable,E=n.sloppy,S=n.strict,o=I(n.preserveWhitespace);;){if(a=R(n),!a)break;(!s||s.hasOwnProperty(a.title))&&i.push(a)}return{description:o,tags:i}}var s,f,b,_,w,x,E,S;B.prototype.addError=function(e){var r=Array.prototype.slice.call(arguments,1),n=e.replace(/%(\d)/g,function(e,n){return t.assert(n<r.length,"Message reference must be in range"),r[n]});return this._tag.errors||(this._tag.errors=[]),S&&t.throwError(n),this._tag.errors.push(n),x},B.prototype.parseType=function(){if(v(this._title))try{if(this._tag.type=P(this._title,this._last),!(this._tag.type||l(this._title)||c(this._title)||this.addError("Missing or invalid tag type")))return!1}catch(e){if(this._tag.type=null,!this.addError(e.message))return!1}else if(m(this._title))try{this._tag.type=P(this._title,this._last)}catch(t){}return!0},B.prototype._parseNamePath=function(e){var t;return t=q(this._last,E&&l(this._title),!0),t||e||this.addError("Missing or invalid tag name")?(this._tag.name=t,!0):!1},B.prototype.parseNamePath=function(){return this._parseNamePath(!1)},B.prototype.parseNamePathOptional=function(){return this._parseNamePath(!0)},B.prototype.parseName=function(){var e,t;if(h(this._title))if(this._tag.name=q(this._last,E&&l(this._title),d(this._title)),this._tag.name)t=this._tag.name,"["===t.charAt(0)&&"]"===t.charAt(t.length-1)&&(e=t.substring(1,t.length-1).split("="),e[1]&&(this._tag["default"]=e[1]),this._tag.name=e[0],this._tag.type&&"OptionalType"!==this._tag.type.type&&(this._tag.type={type:"OptionalType",expression:this._tag.type}));else{if(!p(this._title))return!0;if(l(this._title)&&this._tag.type&&this._tag.type.name)this._extra.name=this._tag.type,this._tag.name=this._tag.type.name,this._tag.type=null;else if(!this.addError("Missing or invalid tag name"))return!1}return!0},B.prototype.parseDescription=function(){var e=g(o(w,f,this._last));return e&&(/^-\s+/.test(e)&&(e=e.substring(2)),this._tag.description=e),!0},B.prototype.parseKind=function(){var e,t;return t={"class":!0,constant:!0,event:!0,external:!0,file:!0,"function":!0,member:!0,mixin:!0,module:!0,namespace:!0,typedef:!0},e=g(o(w,f,this._last)),this._tag.kind=e,a(t,e)||this.addError("Invalid kind name '%0'",e)?!0:!1},B.prototype.parseAccess=function(){var e;return e=g(o(w,f,this._last)),this._tag.access=e,"private"===e||"protected"===e||"public"===e||this.addError("Invalid access name '%0'",e)?!0:!1},B.prototype.parseVariation=function(){var e,t;return t=g(o(w,f,this._last)),e=parseFloat(t,10),this._tag.variation=e,isNaN(e)&&!this.addError("Invalid variation '%0'",t)?!1:!0},B.prototype.ensureEnd=function(){var e=g(o(w,f,this._last));return e&&!this.addError("Unknown content '%0'",e)?!1:!0},B.prototype.epilogue=function(){var e;return e=this._tag.description,!l(this._title)||this._tag.type||!e||"["!==e.charAt(0)||(this._tag.type=this._extra.name,this._tag.name||(this._tag.name=void 0),E||this.addError("Missing or invalid tag name"))?!0:!1},s={access:["parseAccess"],alias:["parseNamePath","ensureEnd"],augments:["parseType","parseNamePathOptional","ensureEnd"],constructor:["parseType","parseNamePathOptional","ensureEnd"],"class":["parseType","parseNamePathOptional","ensureEnd"],"extends":["parseType","parseNamePathOptional","ensureEnd"],deprecated:["parseDescription"],global:["ensureEnd"],inner:["ensureEnd"],instance:["ensureEnd"],kind:["parseKind"],mixes:["parseNamePath","ensureEnd"],mixin:["parseNamePathOptional","ensureEnd"],member:["parseType","parseNamePathOptional","ensureEnd"],method:["parseNamePathOptional","ensureEnd"],module:["parseType","parseNamePathOptional","ensureEnd"],func:["parseNamePathOptional","ensureEnd"],"function":["parseNamePathOptional","ensureEnd"],"var":["parseType","parseNamePathOptional","ensureEnd"],name:["parseNamePath","ensureEnd"],namespace:["parseType","parseNamePathOptional","ensureEnd"],"private":["parseType","parseDescription"],"protected":["parseType","parseDescription"],"public":["parseType","parseDescription"],readonly:["ensureEnd"],requires:["parseNamePath","ensureEnd"],since:["parseDescription"],"static":["ensureEnd"],summary:["parseDescription"],"this":["parseNamePath","ensureEnd"],todo:["parseDescription"],typedef:["parseType","parseNamePathOptional"],variation:["parseVariation"],version:["parseDescription"]},B.prototype.parse=function(){var e,t,r,n;if(!this._title&&!this.addError("Missing or invalid title"))return null;for(this._last=A(this._title),r=a(s,this._title)?s[this._title]:["parseType","parseName","parseDescription","epilogue"],e=0,t=r.length;t>e;++e)if(n=r[e],!this[n]())return null;return this._tag},n.parse=M}(n={}),exports.version=t.VERSION,exports.parse=n.parse,exports.parseType=e.parseType,exports.parseParamType=e.parseParamType,exports.unwrapComment=y,exports.Syntax=s(e.Syntax),exports.Error=t.DoctrineError,exports.type={Syntax:exports.Syntax,parseType:e.parseType,parseParamType:e.parseParamType,stringify:e.stringify}}();