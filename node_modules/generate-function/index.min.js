var util=require("util"),INDENT_START=/[\{\[]/,INDENT_END=/[\}\]]/;module.exports=function(){var t=[],e=0,n=function(n){for(var r="";r.length<2*e;)r+="  ";t.push(r+n)},r=function(t){return t?INDENT_END.test(t.trim()[0])&&INDENT_START.test(t[t.length-1])?(e--,n(util.format.apply(util,arguments)),e++,r):INDENT_START.test(t[t.length-1])?(n(util.format.apply(util,arguments)),e++,r):INDENT_END.test(t.trim()[0])?(e--,n(util.format.apply(util,arguments)),r):(n(util.format.apply(util,arguments)),r):r};return r.toString=function(){return t.join("\n")},r.toFunction=function(t){var e="return ("+r.toString()+")",n=Object.keys(t||{}).map(function(t){return t}),i=n.map(function(e){return t[e]});return Function.apply(null,n.concat(e)).apply(null,i)},arguments.length&&r.apply(null,arguments),r};